(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ba01cfa"],{"36bd":function(t,e,a){"use strict";var s=a("4bf8"),r=a("77f1"),n=a("9def");t.exports=function(t){var e=s(this),a=n(e.length),i=arguments.length,o=r(i>1?arguments[1]:void 0,a),h=i>2?arguments[2]:void 0,f=void 0===h?a:r(h,a);while(f>o)e[o++]=t;return e}},"6c7b":function(t,e,a){var s=a("5ca1");s(s.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"92cd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exp-container"},[a("div",{staticClass:"text-canvas"},[a("svg",{staticStyle:{outline:"1px solid red","font-size":"2em",overflow:"visible"},attrs:{width:"660",height:"220"}},[a("text",{attrs:{x:"240",y:"120"}},[a("tspan",[t._v("SVG")]),a("tspan",[t._v("SVG")])])]),a("div",[t._v("测试 高亮划词 ")]),a("svg",{staticStyle:{outline:"1px solid red","font-size":"15px",overflow:"visible"},attrs:{id:"textGroup"},on:{mouseup:t.handle_select}},[a("tspan",{attrs:{"data-offset":"1111"}},[t._v("5 ")]),a("tspan",[t._v("5 ")]),a("text",{attrs:{x:"240",y:"120"}},[a("tspan",{attrs:{x:"20",y:"15","data-offset":"0"}},[t._v("5")]),a("tspan",{attrs:{x:"20",y:"77","data-offset":"0"}},[t._v("5")]),a("tspan",{attrs:{x:"30",y:"77","data-offset":"1"}},[t._v(".")]),a("tspan",{attrs:{x:"40",y:"77","data-offset":"2"}},[t._v("6")]),a("tspan",{attrs:{x:"50",y:"77","data-offset":"3"}},[t._v(".")]),a("tspan",{attrs:{x:"60",y:"77","data-offset":"4"}},[t._v("8")]),a("tspan",{attrs:{x:"70",y:"77","data-offset":"5"}}),a("tspan",{attrs:{x:"74",y:"77","data-offset":"6"}},[t._v("当")]),a("tspan",{attrs:{x:"89",y:"77","data-offset":"7"}},[t._v("阳")]),a("tspan",{attrs:{x:"104",y:"77","data-offset":"8"}},[t._v("台")]),a("tspan",{attrs:{x:"119",y:"77","data-offset":"9"}},[t._v("或")]),a("tspan",{attrs:{x:"134",y:"77","data-offset":"10"}},[t._v("建")]),a("tspan",{attrs:{x:"149",y:"77","data-offset":"11"}},[t._v("筑")]),a("tspan",{attrs:{x:"164",y:"77","data-offset":"12"}},[t._v("外")]),a("tspan",{attrs:{x:"179",y:"77","data-offset":"13"}},[t._v("墙")]),a("tspan",{attrs:{x:"194",y:"77","data-offset":"14"}},[t._v("设")]),a("tspan",{attrs:{x:"209",y:"77","data-offset":"15"}},[t._v("置")]),a("tspan",{attrs:{x:"224",y:"77","data-offset":"16"}},[t._v("空")]),a("tspan",{attrs:{x:"239",y:"77","data-offset":"17"}},[t._v("调")]),a("tspan",{attrs:{x:"254",y:"77","data-offset":"18"}},[t._v("室")]),a("tspan",{attrs:{x:"269",y:"77","data-offset":"19"}},[t._v("外")]),a("tspan",{attrs:{x:"284",y:"77","data-offset":"20"}},[t._v(" 。")])])])])])},r=[],n=(a("6c7b"),a("7f7f"),a("7514"),a("ac6a"),a("28a5"),a("a481"),a("6762"),a("2fdb"),a("2f62"),8),i=10,o=["F","J","L","I","T"],h=["J"],f=["f","i","j","l","r","t","I"],d=["M","r","G","W","Q"],l=["w","W"],u=["m"],c=10,v=10,p=15,x=4,w={name:"text-heighlight-exp",data:function(){return{chunkData:[],wordColors:{}}},methods:{selectText:function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():""},handle_select:function(t){console.log(t);var e=this.selectText();console.log("选中的元素为: ",e)},insertDataChunk:function(){},getTxtWidth:function(t){var e,a=/^[a-z]+$/,s=/^[A-Z]+$/,r=/^[0-9]$/,n=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return e=n.test(t)?this.charWidth:/\s/.test(t)?this.spaceWidth:a.test(t)?this.enWidth:s.test(t)?this.bigEnWidth:r.test(t)?this.numWidth:this.charWidth,this.smallerLetter1.includes(t)&&(e-=1),this.smallerLetter2.includes(t)&&(e-=2),this.smallerLetter4.includes(t)&&(e-=4),this.bigLetter1.includes(t)&&(e+=1),this.bigLitter2.includes(t)&&(e+=2),this.bigLetter4.includes(t)&&(e+=4),e},chunkWords:function(){this.dataChunk=[];var t=this.words;t=t.replace("↵↵","\n"),t=t.replace("↵","\n");for(var e=t.split("\n"),a=0;a<e.length;a++){for(var s=e[a].split(" "),r=[],n=0;n<s.length;n++){for(var i=s[n],o=0;o<i.length;o++){var h=i.slice(o,o+1);r.push(h)}r.push(" ")}e[a]=r}for(var f=0;f<e.length;f++){var d=e[f],l=d.length,u=d[l-1].trim();u?d[l]="↵↵":d[l-1]="↵↵"}this.chunkIndex=0;for(var c=0;c<e.length;c++){var v=e[c];this.chunkIndex>0&&this.dataChunk[this.chunkIndex].length&&this.chunkIndex++;for(var p=0;p<v.length;p++){var x=v[p],w=this.getTxtWidth(x);this.insertDataChunk(x,w)}}this.drawText()},drawText:function(){var t=this;this.textGroup.clear();for(var e=this,a=function(a){var s=t.dataChunk[a];t.textGroup.text(function(t){for(var r=0;r<s.length;r++){var n=s[r];if(0===a)s[r].offset=r,s.allOffset=r;else{var i=e.dataChunk[a-1].allOffset+r+1;s[r].offset=i,s.allOffset=i}s[r].row=a,s[r].index=r,e.textDom[s[r].offset]=t.tspan(n.text).attr("x",n.dx).attr("y",n.dy).data("offset",s[r].offset)}}).data("row",a)},s=0;s<this.dataChunk.length;s++)a(s)},checkWord:function(){var t=this,e=this.words;e=e.replace("↵↵","\n"),e=e.replace("↵","\n"),e=e.split("\n"),this.words=e.join("");for(var a=0;a<this.relationArr.length;a++)this.setKnownData(this.relationArr[a],"relation");for(var s=0;s<this.operateArr.length;s++)this.setKnownData(this.operateArr[s],"operate");for(var r=0;r<this.objectArr.length;r++)this.setKnownData(this.objectArr[r],"object");for(var n=0;n<this.attrArr.length;n++)this.setKnownData(this.attrArr[n],"attr");for(var i in this.result)this.result[i].forEach(function(e){t.sureMarkWord(e)})},setKnownData:function(t,e,a,s){var r=a||this.words,n=r.indexOf(t),i=t.length;if(s=s||0,n>-1){var o={type:e,word:t,name:t,offset:[n+s,n+s+i-1],id:Math.ceil((new Date).getTime()*Math.random()*(n+1))};if(0===this.result[e].length)this.result[e].push(o);else{this.result[e].find(function(t,e){if(o.offset[0]<=t.offset[1])return insertIndex=e,!0}),insertIndex>-1?this.result[e].splice(insertIndex,0,o):this.result[e].push(o)}var h=r.substr(n+i);this.setKnownData(t,e,h,s+n+i)}},sureMarkWord:function(t){var e=this.findWord(t.offset[0]),a=this.findWord(t.offset[1]);if(e&&a){var s=e.row,r=a.row;e.index,a.index;if(s==r)this.signleRowMark(e,a,dta,r);else{var n=this.dataChunk[r][0];this.signleRowMark(n,a,t,r);for(var i=s;i<r;i++){var o=this.dataChunk[i].length,h=this.dataChunk[i][o-1];i===s?this.signleRowMark(e,h,t,s,!0):this.signleRowMark(this.dataChunk[i][0],h,t,i)}}}},findWord:function(t){for(var e=null,a=0;a<this.dataChunk.length;a++){var s=item[j];if(s.offset===t){e=s;break}if(e)break}return e},signleRowMark:function(t,e,a,s){var r=e.dx+e.width-t.dx,n=t.dx,i=t.dy-this.wordHeight+4,o=this.wordHeight,h=a.name,f=a.type,d=a.word,l=a.id,u={width:r,height:o,x:n,y:i,type:f,word:d,name:h,id:l,row:s,ry:i};this.drawMarkGroups(u)},drawChunkRect:function(t){var e,a=t,s=a.width,r=a.height,n=a.x,i=a.y,o=a.type,h=a.id,f=a.row;a.word;e=this.wordColors[o],t={},t.rect=this.rectRows[f].group().rect(s,r).move(n,i).fill(isTemp?"none":e).attr("id",h).data("type",t.type).data("word",t.word),this.wordRectDom[h].push(t)}},mounted:function(){}},g=w,y=a("2877");a.d(e,"enWidth",function(){return n}),a.d(e,"bigEnWidth",function(){return i}),a.d(e,"smallerLetter1",function(){return o}),a.d(e,"smallerLetter2",function(){return h}),a.d(e,"smallerLetter4",function(){return f}),a.d(e,"bigLetter1",function(){return d}),a.d(e,"bigLetter2",function(){return l}),a.d(e,"bigLetter4",function(){return u}),a.d(e,"numWidth",function(){return c}),a.d(e,"charWidth",function(){return v}),a.d(e,"chWidth",function(){return p}),a.d(e,"spaceWidth",function(){return x});var k=Object(y["a"])(g,s,r,!1,null,null,null);e["default"]=k.exports}}]);
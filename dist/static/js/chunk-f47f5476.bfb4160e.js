(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f47f5476"],{5208:function(t,e,i){},"611d":function(t,e,i){},"626b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nlg-template-container"},[t._m(0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDomain,expression:"showDomain"}],staticClass:"ef-menu-container"},[i("div",{staticClass:"ef-menu-header"},[t._m(1),i("el-button",{staticStyle:{color:"black","font-size":"15px",display:"inline-block",float:"right",padding:"8px 5px 5px 0px"},attrs:{type:"text",icon:"el-icon-s-fold"},on:{click:t.closeDomainSide}})],1),i("domain-editor",{attrs:{treeheight:450,data:t.domainData,cateType:"show"},on:{cateSelected:t.handleCateSelected,openCateEdit:t.handleCateEdit}})],1),i("div",{ref:"showContainer",class:[t.showDomain?"ef-show-container":"ef-show-container-max"]},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDomain,expression:"!showDomain"}]},[i("el-button",{staticStyle:{color:"black","font-size":"15px",display:"inline-block",float:"left",padding:"8px 5px 5px 0px"},attrs:{type:"text",icon:"el-icon-s-unfold"},on:{click:t.openDomainSide}})],1),i("div",{staticClass:"sp-filter-container"}),i("div",{staticClass:"sp-show-container"},[i("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.showData,height:t.tableHeight,"header-cell-style":{background:"#F5F7F8"}}},[i("el-table-column",{attrs:{label:"脚本ID",prop:"id"}}),i("el-table-column",{attrs:{label:"脚本标题",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),i("el-table-column",{attrs:{label:"修改人",prop:"editor"}}),i("el-table-column",{attrs:{label:"编辑时间",prop:"editTime"}}),i("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",[i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleScriptCreate()}}},[t._v("新建")])],1)]}},{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.handleScriptEdit(e.$index,e.row)}}},[i("i",{staticClass:"el-icon-edit"})]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.handleScriptDelete(e.$index,e.row)}}},[i("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),i("div",{staticClass:"sp-pg-container"},[i("el-pagination",{attrs:{"current-page":t.curPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-drawer",{attrs:{visible:t.drawer,direction:t.direction,modal:!1,size:"50%","with-header":!0,"before-close":t.handleScriptEditorClose},on:{"update:visible":function(e){t.drawer=e}}},[i("script-editor",{attrs:{scriptData:t.curScript},on:{confirm:t.handleConfirmEditEvent,cancel:t.handleCancelEditEvent}})],1)],1),i("el-dialog",{attrs:{title:"场景编辑",visible:t.showSecneDialog},on:{"update:visible":function(e){t.showSecneDialog=e}}},[i("span",[t._v(" 场景编辑占位符 ")]),i("domain-editor",{attrs:{treeheight:450,data:t.domainData,cateType:"edit"},on:{openCateEdit:t.handleCateEdit}})],1)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ef-nlg-header"},[i("div",{staticStyle:{padding:"10px"}},[i("span",{staticStyle:{"font-size":"15px"}},[t._v("  NLG执行脚本编辑  ")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("b",[t._v("场景")])])}],s=(i("20d6"),i("0789")),o=i("cf45"),c=i("22c0"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-editor-container"},[i("div",{staticClass:"sp-desc-info"},[t._m(0),i("el-row",{staticStyle:{"padding-left":"20px"}},[i("el-col",{attrs:{span:12}},[t._v(" \n                领域名称: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.domain,callback:function(e){t.$set(t.describe,"domain",e)},expression:"describe.domain"}})],1),i("el-col",{attrs:{span:12}},[t._v(" \n                子领域名称: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.sub_domain,callback:function(e){t.$set(t.describe,"sub_domain",e)},expression:"describe.sub_domain"}})],1)],1),i("br"),i("el-row",{staticStyle:{"padding-left":"20px"}},[i("el-col",{attrs:{span:12}},[t._v(" \n                意  图:      "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.intent,callback:function(e){t.$set(t.describe,"intent",e)},expression:"describe.intent"}})],1),i("el-col",{attrs:{span:12}},[t._v(" \n                   版        本:        "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.version,callback:function(e){t.$set(t.describe,"version",e)},expression:"describe.version"}})],1)],1)],1),i("br"),i("div",{staticClass:"sp-script-container"},[t._m(1),i("div",{staticStyle:{"text-align":"right","padding-right":"20px",position:"absolute",top:"10px",right:"10px"},on:{click:function(e){return t.handleAddTemplate()}}},[i("i",{staticClass:"el-icon-plus"},[t._v("新增模板信息")])]),i("div",{staticClass:"script-inner-container"},t._l(t.scripts,function(e,n){return i("div",{key:n,staticClass:"sp-temp-info"},[i("div",[i("i",{staticClass:"el-icon-delete",staticStyle:{"z-index":"99",position:"absolute",bottom:"5px",right:"10px","font-size":"15px"},on:{click:function(e){return t.handleDelTemp(n)}}})]),i("div",[i("i",{staticClass:"el-icon-caret-top",staticStyle:{"z-index":"99",position:"absolute",top:"5px",right:"5px","font-size":"15px"},on:{click:function(e){return t.handleTurnUp(n)}}})]),i("div",[i("i",{staticClass:"el-icon-caret-bottom",staticStyle:{"z-index":"99",position:"absolute",top:"20px",right:"5px","font-size":"15px"},on:{click:function(e){return t.handleTurnDown(n)}}})]),i("div",{staticStyle:{"z-index":"99","background-color":"lightblue","border-radius":"5px",height:"24px",width:"24px",position:"absolute","text-align":"center",top:"10px",right:"25px","font-size":"15px"}},[i("span",[t._v(" "+t._s(n)+" ")])]),i("el-row",[i("el-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[i("div",[t._v("\n                     领域名称: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.domain,callback:function(i){t.$set(e,"domain",i)},expression:"tempInform.domain"}})],1),i("br"),i("div",[t._v("\n                        领域描述: "),i("el-input",{staticStyle:{width:"90%","margin-left":"9%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容",size:"mini"},model:{value:e.domain_desc,callback:function(i){t.$set(e,"domain_desc",i)},expression:"tempInform.domain_desc"}})],1)]),i("el-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[i("div",[t._v("\n                     子领域名称: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.sub_domain,callback:function(i){t.$set(e,"sub_domain",i)},expression:"tempInform.sub_domain"}})],1),i("br"),i("div",[t._v("\n                        子领域描述: \n                                "),i("el-input",{staticStyle:{width:"90%","margin-left":"9%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容",size:"mini"},model:{value:e.sub_domain_desc,callback:function(i){t.$set(e,"sub_domain_desc",i)},expression:"tempInform.sub_domain_desc"}})],1)])],1),i("br"),i("el-row",[i("el-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[i("div",[t._v("\n                     意图名称: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.intent,callback:function(i){t.$set(e,"intent",i)},expression:"tempInform.intent"}})],1),i("br"),i("div",[t._v("\n                        意图描述: \n                                "),i("el-input",{staticStyle:{width:"90%","margin-left":"9%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容",size:"mini"},model:{value:e.intent_desc,callback:function(i){t.$set(e,"intent_desc",i)},expression:"tempInform.intent_desc"}})],1)]),i("el-col",{staticStyle:{"padding-left":"15px"},attrs:{span:12}},[i("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                     意图类型: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.intent_type,callback:function(i){t.$set(e,"intent_type",i)},expression:"tempInform.intent_type"}})],1),i("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                     类      型:   "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.item_type,callback:function(i){t.$set(e,"item_type",i)},expression:"tempInform.item_type"}})],1),i("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                     循环槽位: "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.loop_key,callback:function(i){t.$set(e,"loop_key",i)},expression:"tempInform.loop_key"}})],1),i("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                     版      本:   "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.version,callback:function(i){t.$set(e,"version",i)},expression:"tempInform.version"}})],1)])],1)],1)}),0)]),i("div",{staticClass:"demo-drawer__footer",staticStyle:{"text-algin":"right",position:"relative"}},[i("div",{staticStyle:{float:"right","padding-right":"20px","margin-top":"5px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleCancel()}}},[t._v("取 消")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleConfirm()}}},[t._v("确 定")])],1)])])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"sp-desc-title"},[i("b",[t._v("脚本信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"sp-script-title"},[i("b",[t._v("引用脚本")])])}],d=i("2ef0"),p=i.n(d),u=i("2b75"),m={describe:{domain:"block",sub_domain:"building_info",intent:"resblock_greening",version:"long-toB-1-v2"},script:[{domain:"block",domain_desc:"小区情况",sub_domain:"building_info",sub_domain_desc:"小区_环境_绿化率",intent:"resblock_greening",intent_desc:"resblock_greening",version:"long-toB-1-v2",item_type:"utterance",intent_type:"general",loop_key:""}]},h={name:"scriptEditor",components:{conditionGroup:u["a"]},props:{scriptData:{type:Object,default:function(){return m}}},watch:{scriptData:{handler:function(t,e){this.scriptInfo=p.a.cloneDeep(t),this.describe=this.scriptInfo.describe,this.scripts=this.scriptInfo.script},deep:!0,immediate:!0}},data:function(){return{scriptInfo:p.a.cloneDeep(this.scriptData),describe:void 0,scripts:void 0}},methods:{handleAddTemplate:function(){var t={domain:"",domain_desc:"",sub_domain:"",sub_domain_desc:"",intent:"",intent_desc:"",version:"",item_type:"",intent_type:"",loop_key:""};this.scripts.push(t)},handleDelTemp:function(t){console.log("触发删除 模板配置操作"),this.scripts.splice(t,1)},swapItem:function(t,e,i){t[e]=t.splice(i,1,t[e])[0]},handleTurnUp:function(t){console.log("触发 上调模板操作"),0!==t&&this.swapItem(this.scripts,t,t-1)},handleTurnDown:function(t){console.log("触发下调模板操作"),t!==this.scripts.length-1&&this.swapItem(this.scripts,t,t+1)},handleCancel:function(){console.log("处理取消脚本编辑内容");var t={};this.describe=p.a.cloneDeep(this.scriptData).describe,this.scripts=p.a.cloneDeep(this.scriptData).script,this.$emit("cancel",t)},handleConfirm:function(){console.log("处理确认脚本编辑内容");var t={id:this.scriptData.id,creator:this.scriptData.creator,createTime:this.scriptData.createTime,describe:p.a.cloneDeep(this.describe),script:p.a.cloneDeep(this.scripts)};this.$emit("confirm",t)}},created:function(){},mounted:function(){}},f=h,b=(i("b2f4"),i("2877")),v=Object(b["a"])(f,r,l,!1,null,"3c008e7a",null),g=v.exports,_=i("0960"),x={name:"NLGEidtor",components:{domainEditor:c["a"],scriptEditor:g,templateEditor:_["a"]},computed:{showData:function(){return this.scriptData}},data:function(){return{showDomain:!1,domainData:[],scriptData:[],showSecneDialog:!1,direction:"rtl",drawer:!1,tableHeight:window.innerHeight-210,curScript:void 0,curPage:1,pageSize:10,totalNum:-1}},methods:{closeDomainSide:function(){console.log("触发关闭domain 侧边栏!"),this.showDomain=!1},openDomainSide:function(){console.log("打开 domain 侧边栏"),this.showDomain=!0},cancelForm:function(){this.showDomain=!1},handleSizeChange:function(t){var e=this;this.curPage=1,this.pageSize=t;var i={page:this.curPage,per_page:this.pageSize,endpoint:""};Object(s["e"])(i).then(function(t){e.scriptData=t["items"],e.totalNum=t["_meta"]["total_items"]})},handleCurrentChange:function(t){var e=this;this.curPage=t;var i={page:this.curPage,per_page:this.pageSize,endpoint:""};Object(s["e"])(i).then(function(t){e.scriptData=t["items"],e.totalNum=t["_meta"]["total_items"]})},handleCateSelected:function(){console.log("触发domain 选中事件")},handleCateEdit:function(){console.log("触发domain编辑事件"),this.showSecneDialog=!0},handleScriptEdit:function(t,e){console.log("当前编辑的 脚本index为: ",t),this.drawer=!0,this.curScript=this.scriptData[t]},handleScriptDelete:function(t,e){this.scriptData.splice(t,1),Object(s["c"])(e).then(function(t){console.log("删除成功")})},handleScriptCreate:function(){this.drawer=!0;var t={id:void 0,name:"",creator:this.userName,createTime:Object(o["b"])(),editor:this.userName,editTime:Object(o["b"])(),describe:{domain:"",sub_domain:"",intent:"",version:""},script:[]};this.curScript=t},handleScriptEditorClose:function(){this.drawer=!1,this.curScript=void 0},handleConfirmEditEvent:function(t){this.drawer=!1,console.log("接收到修改后的数据为: ",t);var e=this.findeIdx(t);if(-1===e){var i=Object(o["d"])(10,16);console.log("新建的 脚本的id为: ",i),console.log("当前脚本的修改人为: ",this.userName),t.id=i,t.name=t.describe.domain+"-"+t.describe.sub_domain+"-"+t.describe.intent+"-"+t.describe.version,t.creator=this.userName,t.createTime=Object(o["b"])(),t.editor=this.userName,t.editTime=Object(o["b"])(),this.scriptData.unshift(t),Object(s["a"])(p.a.cloneDeep(t)).then(function(t){console.log("新建script 数据保存成功",t)})}else this.scriptData[e].name=t.describe.domain+"-"+t.describe.sub_domain+"-"+t.describe.intent+"-"+t.describe.version,this.scriptData[e].editor=this.userName,this.scriptData[e].editTime=Object(o["b"])(),Object(s["g"])(p.a.cloneDeep(this.scriptData[e])).then(function(t){console.log("修改同步后台成功!",t)})},handleCancelEditEvent:function(t){this.drawer=!1,this.curScript=void 0},findeIdx:function(t){var e=t.id,i=this.scriptData.findIndex(function(t){return console.log("当前脚本id: ",e," 比照id: ",t.id),t.id===e});return-1!==i&&this.scriptData[i].version!==t.version&&(i=-1),i}},mounted:function(){var t=this;console.log("展示容器的高度为: ",this.$refs.showContainer.clientHeight),console.log("表格高度为: ",window.innerHeight-210),this.userName=localStorage.getItem("userName"),console.log("当前的用户名为: ",this.userName);var e={page:this.curPage,per_page:this.pageSize,endpoint:""};Object(s["e"])(e).then(function(e){t.scriptData=e["items"],t.totalNum=e["_meta"]["total_items"]})}},w=x,S=(i("c573"),Object(b["a"])(w,n,a,!1,null,"002984e6",null));e["default"]=S.exports},b2f4:function(t,e,i){"use strict";var n=i("611d"),a=i.n(n);a.a},c573:function(t,e,i){"use strict";var n=i("5208"),a=i.n(n);a.a}}]);
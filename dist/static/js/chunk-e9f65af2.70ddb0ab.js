(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9f65af2"],{"333e":function(t,e,n){},"706f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-info-container"},["normal"===t.entity_type?n("div",{staticClass:"normal-entity-page"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名词名称"}},[n("el-input",{attrs:{size:"small"},model:{value:t.entityInfo.entityName,callback:function(e){t.$set(t.entityInfo,"entityName",e)},expression:"entityInfo.entityName"}})],1),n("el-form-item",{attrs:{label:"名词成员"}},[n("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{border:"","max-height":"300px",height:"200px",data:t.entityInfo.entityValues,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{prop:"entityValue",label:"名词成员",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.$index==t.coordinate.row&&0==t.coordinate.column,expression:"scope.$index == coordinate.row &&\n                            0 == coordinate.column"}],attrs:{size:"small"},on:{blur:function(n){return t.handleBlur(0,e.$index)}},model:{value:e.row.entityValue,callback:function(n){t.$set(e.row,"entityValue",n)},expression:"scope.row.entityValue"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.$index!=t.coordinate.row,expression:"scope.$index != coordinate.row"}],on:{click:function(n){return t.handleEdit(0,e.$index)}}},[t._v("\n                                "+t._s(""!==e.row.entityValue?e.row.entityValue:"输入名词成员")+"\n                            ")])]}}],null,!1,2779925229)}),n("el-table-column",{attrs:{prop:"synmous",label:"同义词"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.synmous,function(i,o){return n("el-tag",{key:o,attrs:{closable:""},on:{close:function(n){return t.handleClose(e.$index,i)}}},[t._v("\n                                "+t._s(i)+"\n                            ")])}),t.entityInfo.entityValues[e.$index].inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"70px"},attrs:{size:"mini"},on:{blur:function(n){return t.handleInputConfirm(e.$index)}},model:{value:t.entityInfo.entityValues[e.$index].inputValue,callback:function(n){t.$set(t.entityInfo.entityValues[e.$index],"inputValue",n)},expression:"entityInfo.entityValues[scope.$index].inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(n){return t.showInput(e.$index)}}},[t._v("+ New Tag")])]}}],null,!1,2852100595)}),n("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-delete",on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}],null,!1,209753885)})],1),n("span",{on:{click:t.addEntItem}},[t._v("+ 添加词条 ")])],1)],1)],1):t._e(),"regex"===t.entity_type?n("div",{staticClass:"regex-entity-page"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"实体类名"}},[n("el-input",{attrs:{placeholder:"限制30个字符"},model:{value:t.entityNode.entityName,callback:function(e){t.$set(t.entityNode,"entityName",e)},expression:"entityNode.entityName"}})],1),n("el-form-item",{attrs:{label:"名词名称"}},[n("el-input",{attrs:{placeholder:"正则表达式"},model:{value:t.entityNode.regex,callback:function(e){t.$set(t.entityNode,"regex",e)},expression:"entityNode.regex"}})],1),n("el-form-item",{attrs:{label:"测试正则表达式"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.entityNode.entityName,callback:function(e){t.$set(t.entityNode,"entityName",e)},expression:"entityNode.entityName"}})],1),n("el-form-item",{attrs:{label:"测试结果"}},[n("span",{ref:"regex-test-results"})])],1)],1):t._e(),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("创建")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onCancel}},[t._v("取消")])],1)])},o=[],s=(n("ac6a"),n("2ef0")),a={name:"entity-info",props:{entityNode:{type:Object,default:function(){}},userId:{type:String,default:""},botId:{type:String,default:""}},computed:{},data:function(){return{entity_type:"normal",regex_test_content:[],form:{},entityInfo:{},coordinate:{column:-1,row:-1}}},methods:{initEntInfo:function(){var t=Object(s["cloneDeep"])(this.entityNode);return t.entityValues.forEach(function(t){t.inputVisible=!1,t.inputValue=""}),t},handleInputConfirm:function(t){console.log("完成"+t+"词条添加同义词"),this.entityInfo.entityValues[t].synmous.push(this.entityInfo.entityValues[t].inputValue),this.entityInfo.entityValues[t].inputVisible=!1,this.entityInfo.entityValues[t].inputValue=""},showInput:function(t){console.log("为"+t+"词条添加同义词"),this.entityInfo.entityValues[t].inputVisible=!0},handleClose:function(t,e){var n=this,i=this;i.$confirm("将要删除该同义词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.entityInfo.entityValues[t].synmous.splice(n.entityInfo.entityValues[t].synmous.indexOf(e),1),i.$message({type:"success",message:"当前同义词成功删除"})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},handleEdit:function(t,e){this.coordinate.column=t,this.coordinate.row=e},handleBlur:function(t,e){this.coordinate.column=-1,this.coordinate.row=-1},handleDelete:function(t,e){var n=this,i=this;i.$confirm("将要删除当前词条, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.entityInfo.entityValues.splice(t,1),i.$message({type:"success",message:"当前词条成功删除"})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},entityType:function(t){this.entity_type=t},onSubmit:function(){console.log("触发创建操作: "+this.entityNode.entityName),this.entityInfo.userId=this.userId,this.entityInfo.botId=this.botId,this.$emit("updateEntity",this.entityInfo)},onCancel:function(){this.$emit("cancelEntity",this.entityNode)},addEntItem:function(){this.entityInfo.entityValues.push({entityValue:"",synmous:[],inputVisible:!1,inputValue:""}),this.$message({type:"success",message:"新增一个词条"})}},mounted:function(){},watch:{entityNode:{handler:function(t,e){void 0!==t&&(this.entityInfo=this.initEntInfo())},immediate:!0,deep:!0}}},l=a,r=n("2877"),u=Object(r["a"])(l,i,o,!1,null,"9b2ee192",null);e["a"]=u.exports},"7e9c":function(t,e,n){"use strict";var i=n("333e"),o=n.n(i);o.a},b169:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{on:{click:t.openEntityEditor}},[n("i",{staticClass:"iconfont icon-shujuzidian",staticStyle:{"font-size":"25px"}})]),n("el-dialog",{attrs:{width:"60%",title:"编辑名词",modal:!1,visible:t.outerVisible},on:{"update:visible":function(e){t.outerVisible=e}}},[n("entityList",{ref:"entLst",attrs:{userId:t.userId,botId:t.botId,entityInfoList:t.entityInfoList},on:{updateEntity:t.trigger_updateEntity,addEntity:t.trigger_addEntity,deleteEntity:t.trigger_deleteEntity}}),n("el-dialog",{attrs:{width:"60%",title:"新建名词",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[n("entityInfo",{ref:"entityedit",attrs:{userId:t.userId,botId:t.botId,entityNode:t.curEntityInfo},on:{updateEntity:t.updateEntity,cancelEntity:t.cancelEntity}})],1)],1)],1)},o=[],s=(n("20d6"),n("6b54"),n("a481"),n("cebc")),a=n("2f62"),l=n("706f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-editer-container"},[n("el-row",{staticStyle:{"margin-bottom":"7px"}},[n("el-col",{attrs:{span:10}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.searchIntentName,callback:function(e){t.searchIntentName=e},expression:"searchIntentName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("el-col",{attrs:{span:14}},[n("el-button-group",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addEntityInfo("normal")}}},[t._v("新建标准名词")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addEntityInfo("regex")}}},[t._v("新建正则名词")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"280",height:"280",border:"","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{width:"160",prop:"entityName",label:"名词类型"}}),n("el-table-column",{attrs:{prop:"entityValues",label:"名词成员以及其同义词"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.entityValues,function(e,i){return n("p",{key:i},[t._v("\n                    "+t._s(e)+" ----\n                ")])})}}])}),n("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{on:{click:function(n){return t.editEntityInfo(e.$index)}}},[t._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("i",{on:{click:function(n){return t.deleteEntity(e.$index)}}},[t._v("删除")])]}}])})],1)],1)},u=[],c={name:"entity-list",props:{entityInfoList:{type:Array,default:function(){return[]}},userId:{type:String,default:""},botId:{type:String,default:""}},data:function(){return{searchIntentName:""}},computed:{tableData:{get:function(){return this.entityInfoList.map(function(t){return{entityName:t.entityName,entityValues:t.entityValues.map(function(t){return t.entityValue})}})},set:function(t){}}},watch:{entityInfoList:{deep:!0,handler:function(t,e){console.log("Ent list 监听到 实体字典变化: ",t)}}},mounted:function(){},methods:{initTableData:function(t){console.log("加载实体列表生成展示表格数据 ",t),this.tableData=t.map(function(t){return{entityName:t.entityName,entityValues:t.entityValues.map(function(t){return t.entityValue})}})},editEntityInfo:function(t){this.$emit("updateEntity",t),console.log("发出 更新名词动作")},addEntityInfo:function(t){this.$emit("addEntity",t),console.log("发出添加名词动作: "+t)},deleteEntity:function(t){var e=this;console.log("发出删除名词动作",t);var n=this;n.$confirm("将要删除当前实体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("deleteEntity",t),n.$message({type:"success",message:"当前实体成功删除"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})}}},d=c,y=n("2877"),f=Object(y["a"])(d,r,u,!1,null,"0d08386b",null),p=f.exports,m={name:"entity",components:{entityInfo:l["a"],entityList:p},props:{userId:{type:String,default:""},botId:{type:String,default:""}},computed:Object(s["a"])({},Object(a["b"])("nlu",["entityInfoList"])),data:function(){return{outerVisible:!1,innerVisible:!1,curEntityInfo:{useId:this.userId,botId:this.botId,entityName:"",entityId:"",entityValues:[{entityValue:"",synmous:[]}]}}},methods:{UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},openEntityEditor:function(){var t=this;this.outerVisible=!0,this.$nextTick(function(){console.log("触发加载用户实体字典时的引用: ",t.$refs.entLst)})},trigger_updateEntity:function(t){console.log("收到更新实体的事件，参数为: "+t),this.curEntityInfo=this.entityInfoList[t],this.innerVisible=!0},trigger_addEntity:function(t){console.log("收到添加实体的事件"+t),this.innerVisible=!0,this.$nextTick(function(){this.$refs.entityedit.entityType(t)}),this.curEntityInfo={useId:this.userId,botId:this.botId,entityName:"",entityId:"ent_"+this.UUID(),entityValues:[{entityValue:"",synmous:[]}]}},trigger_deleteEntity:function(t){console.log("收到删除实体的事件， 参数为: "+t),this.$store.dispatch("nlu/delEntityInfo",this.entityInfoList[t])},updateEntity:function(t){var e=this.entityInfoList.findIndex(function(e){return e.entityId===t.entityId});-1===e?this.entityInfoList.unshift(t):(this.entityInfoList.splice(e,1),this.entityInfoList.unshift(t),this.$nextTick()),this.$store.dispatch("nlu/updateEntityInfo",t),this.innerVisible=!1,this.curEntityInfo=void 0},cancelEntity:function(t){console.log("接收到取消事件"),this.entityVisible=!1,this.curEntityInfo=void 0}},watch:{entityInfoList:{deep:!0,handler:function(t,e){console.log("entity Editor index 监控到 实体列表发生变化",t)}}},created:function(){var t={userId:this.userId,botId:this.botId};this.$store.dispatch("nlu/loadEntityList",t),console.log("加载实体: ",this.entityInfoList)}},h=m,b=(n("7e9c"),Object(y["a"])(h,i,o,!1,null,"53a77746",null));e["default"]=b.exports}}]);
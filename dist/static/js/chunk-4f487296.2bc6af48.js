(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f487296"],{"0789":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"g",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"e",function(){return r}),n.d(e,"b",function(){return c}),n.d(e,"h",function(){return u}),n.d(e,"d",function(){return d}),n.d(e,"f",function(){return p});var i=n("365c"),a="http://10.200.24.101:5057/api";function l(t){var e=a+"/addScript";return i["a"].post(e,t)}function o(t){var e=a+"/updateScript";return i["a"].post(e,t)}function s(t){var e=a+"/deleteScript";return i["a"].post(e,t)}function r(t){var e=a+"/loadScripts";return console.log("加载脚本 接收到的数据为: ",t),i["a"].get(e,t)}function c(t){var e=a+"/addTemplate";return i["a"].post(e,t)}function u(t){var e=a+"/updateTemplate";return i["a"].post(e,t)}function d(t){var e=a+"/deleteTemplate";return i["a"].post(e,t)}function p(t){var e=a+"/loadTemplates";return i["a"].get(e,t)}},"0960":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tp-edit-container"},[n("div",{staticClass:"tp-desc-container tp-sec-container"},[n("span",{staticClass:"title"},[t._v("模板描述")]),n("el-row",{staticStyle:{"padding-left":"20px"}},[n("el-col",{attrs:{span:12}},[n("b",[t._v("领域名称:")]),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.domain,callback:function(e){t.$set(t.describe,"domain",e)},expression:"describe.domain"}})],1),n("el-col",{attrs:{span:12}},[n("b",[t._v("子领域名称:")]),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.sub_domain,callback:function(e){t.$set(t.describe,"sub_domain",e)},expression:"describe.sub_domain"}})],1)],1),n("br"),n("el-row",{staticStyle:{"padding-left":"20px"}},[n("el-col",{attrs:{span:12}},[n("b",[t._v("意    图:")]),t._v("    "),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.intent,callback:function(e){t.$set(t.describe,"intent",e)},expression:"describe.intent"}})],1),n("el-col",{attrs:{span:12}},[n("b",[t._v("版    本:")]),t._v("       "),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.version,callback:function(e){t.$set(t.describe,"version",e)},expression:"describe.version"}})],1)],1),n("br"),n("el-row",{staticStyle:{"padding-left":"20px"}},[n("el-col",{attrs:{span:12}},[n("b",[t._v("意图类型:")]),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.intent_type,callback:function(e){t.$set(t.describe,"intent_type",e)},expression:"describe.intent_type"}})],1),n("el-col",{attrs:{span:12}},[n("b",[t._v("循环槽位:")]),t._v("     "),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.describe.loop_main_key,callback:function(e){t.$set(t.describe,"loop_main_key",e)},expression:"describe.loop_main_key"}})],1)],1),n("div",{staticStyle:{"padding-left":"20px",margin:"10px 0px 5px 0px","margin-bottom":"5px"}},[n("b",[t._v("使用槽位:")]),t._v("   "),n("br"),t._l(t.describe.slots,function(e){return n("el-tag",{key:e,staticStyle:{margin:"5px"},attrs:{closable:"",size:"mini","disable-transitions":!1},on:{close:function(n){return t.handleSlotTagClose(e)}}},[t._v("\n                "+t._s(e)+"\n            ")])}),t.inputSlotVisible?n("el-input",{ref:"saveSlotTagInput",staticClass:"input-new-tag",staticStyle:{width:"150px"},attrs:{size:"mini"},on:{blur:t.handleSlotTagInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSlotTagInputConfirm(e)}},model:{value:t.newSlotTag,callback:function(e){t.newSlotTag=e},expression:"newSlotTag"}}):n("i",{staticClass:"el-icon-plus",on:{click:t.showSlotInput}})],2),n("div",{staticStyle:{"padding-left":"20px",margin:"5px 0px 5px 0px","margin-bottom":"5px"}},[n("b",[t._v("依赖意图:")]),t._v("                                                            \n            意图间关系:\n            "),n("el-radio",{attrs:{label:"and"},model:{value:t.rely_intent.value,callback:function(e){t.$set(t.rely_intent,"value",e)},expression:"rely_intent.value"}},[t._v("and")]),n("el-radio",{attrs:{label:"or"},model:{value:t.rely_intent.value,callback:function(e){t.$set(t.rely_intent,"value",e)},expression:"rely_intent.value"}},[t._v("or")]),n("br"),t._l(t.rely_intent.child,function(e){return n("el-tag",{key:e.value,staticStyle:{margin:"5px"},attrs:{closable:"",size:"mini","disable-transitions":!1},on:{close:function(n){return t.handleInentTagClose(e)}}},[t._v("\n                "+t._s(e.value)+"\n                ")])}),t.inputIntentVisible?n("el-input",{ref:"saveIntentTagInput",staticClass:"input-new-tag",staticStyle:{width:"150px"},attrs:{size:"mini"},on:{blur:t.handleIntentInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleIntentInputConfirm(e)}},model:{value:t.inputIntentValue,callback:function(e){t.inputIntentValue=e},expression:"inputIntentValue"}}):n("i",{staticClass:"el-icon-plus",on:{click:t.showIntentInput}})],2),n("div",{staticStyle:{"padding-left":"20px",margin:"5px 0px 5px 0px"}},[n("b",[t._v("关键词:")]),t._v("      "),n("br"),t._l(t.keywords,function(e){return n("el-tag",{key:e,staticStyle:{margin:"5px"},attrs:{closable:"",size:"mini","disable-transitions":!1},on:{close:function(n){return t.handleKeywordClose(e)}}},[t._v("\n                "+t._s(e)+"\n            ")])}),t.inputKeywordVisible?n("el-input",{ref:"saveKeywordTagInput",staticClass:"input-new-tag",staticStyle:{width:"150px"},attrs:{size:"mini"},on:{blur:t.handleKeywordInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeywordInputConfirm(e)}},model:{value:t.inputKeywordValue,callback:function(e){t.inputKeywordValue=e},expression:"inputKeywordValue"}}):n("i",{staticClass:"el-icon-plus",on:{click:t.showKeywordInput}})],2)],1),n("div",{staticClass:"tp-arr-container tp-sec-container"},[n("span",{staticClass:"title"},[t._v("模板配置")]),t._l(t.templates,function(e,i){return[n("div",{key:i,staticClass:"tp-temp-info"},[n("div",{staticStyle:{margin:"10px 0px 10px 0px",position:"relative"}},[n("div",{staticStyle:{display:"inline-block","margin-left":"0px","padding-top":"0px",position:"absolute",right:"3px",top:"-10px"}},[n("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"lightblue","font-size":"18px"},on:{click:function(e){return t.handleDelTemplate(i)}}})]),n("div",{staticStyle:{display:"inline-block","margin-left":"0px","padding-top":"0px",position:"absolute",right:"5px",top:"25px"}},[n("div",{staticStyle:{display:"inline-block","margin-right":"20px"}},[t._v(t._s(i))]),n("div",{staticStyle:{position:"absolute",right:"-2px",top:"-8px"}},[n("i",{staticClass:"el-icon-caret-top",staticStyle:{"font-size":"15px"},on:{click:function(e){return t.handleTransup(t.templates,i)}}})]),n("div",{staticStyle:{position:"absolute",right:"-2px",top:"8px"}},[n("i",{staticClass:"el-icon-caret-bottom",staticStyle:{"font-size":"15px"},on:{click:function(e){return t.handleTransdown(t.templates,i)}}})])]),t._v("\n\n                        Group ID: "),n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:t.templates[i].group_id,callback:function(e){t.$set(t.templates[i],"group_id",e)},expression:"templates[tindex].group_id"}})],1),n("div",{staticStyle:{"margin-bottom":"10px 0px 10px 0px"}},[n("span",[t._v("引用槽位:")]),t._l(t.templates[i].slots,function(e){return n("el-tag",{key:e,staticStyle:{margin:"5px"},attrs:{closable:"",size:"mini","disable-transitions":!1},on:{close:function(n){return t.handleInnerSlotTagClose(i,e)}}},[t._v("\n                            "+t._s(e)+"\n                        ")])}),n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.innerSlotIndex===i,expression:"innerSlotIndex === tindex"}],ref:"saveInnerSlotTagInput",refInFor:!0,staticClass:"input-new-tag",staticStyle:{width:"150px"},attrs:{size:"mini"},on:{blur:function(e){return t.handleInnerSlotTagInputConfirm(i)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInnerSlotTagInputConfirm(i)}},model:{value:t.innerSlotTag,callback:function(e){t.innerSlotTag=e},expression:"innerSlotTag"}}),n("i",{directives:[{name:"show",rawName:"v-show",value:t.innerSlotIndex!==i,expression:"innerSlotIndex !== tindex"}],staticClass:"el-icon-plus",on:{click:function(e){return t.showInnerSlotInput(i)}}})],2),n("div",{staticClass:"tp-cg-container",staticStyle:{"margin-bottom":"10px 0px 10px 0px"}},[n("span",[t._v("触发条件:")]),n("condition-group",{attrs:{type:t.templates[i].trigger.type,value:t.templates[i].trigger.value,children:t.templates[i].trigger.child,index:i},on:{valChg:t.handleValueChangeEvent,"update:type":function(e){return t.$set(t.templates[i].trigger,"type",e)},"update:children":function(e){return t.$set(t.templates[i].trigger,"child",e)}}})],1),n("div",[n("span",[t._v("模板:")]),t._l(t.templates[i].texts,function(e,a){return[n("div",{key:a,staticStyle:{padding:"0px 10px",margin:"0px 0px 5px 0px"}},[n("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini"},model:{value:t.templates[i].texts[a],callback:function(e){t.$set(t.templates[i].texts,a,e)},expression:"templates[tindex].texts[tpindex]"}}),t._v("\n                                    "),n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleDelTemplateText(i,a)}}})],1)]}),n("div",{staticStyle:{"text-align":"right","margin-right":"10px"}},[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleAddTemplateText(i)}}},[t._v("添加模板话术")])])],2)])]}),n("div",{staticStyle:{"text-align":"right","margin-right":"10px"}},[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleAddTemplate()}}},[t._v("添加模板")])])],2),n("div",{staticClass:"tp-fmt-container tp-sec-container"},[n("span",{staticClass:"title"},[t._v("逻辑连接")]),t._l(t.fmt,function(e,i){return n("div",{key:i,staticClass:"tp-fmt-info"},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",right:"10px"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleFmtDelSlot(i)}}})]),n("span",[t._v(" 连接单位:    ")]),n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.slot,callback:function(n){t.$set(e,"slot",n)},expression:"fmtInfo.slot"}})],1),n("br"),t._l(e.funcs,function(e,a){return n("div",{key:a,staticClass:"tp-slot-func",staticStyle:{"margin-left":"20px"}},[n("div",{staticStyle:{"text-align":"left","padding-left":"20px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",right:"10px"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleFmtDelFunc(i,a)}}},[t._v("  删除函数")])]),t._v("\n                    \n                函数:  "),n("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini"},model:{value:e.fmt_name,callback:function(n){t.$set(e,"fmt_name",n)},expression:"funcInfo.fmt_name"}}),t._v("\n\n                  "),n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleFmtAddParam(i,a)}}},[t._v("添加参数")])],1),t._l(e.params,function(e,l){return n("div",{key:l,staticStyle:{"text-align":"left","padding-left":"80px",margin:"5px 0px 5px 0px"}},[t._v("\n                     参数名:  "),n("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini"},model:{value:e.key,callback:function(n){t.$set(e,"key",n)},expression:"param.key"}}),t._v("\n                     参数值:  "),n("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini"},model:{value:e.val,callback:function(n){t.$set(e,"val",n)},expression:"param.val"}}),t._v("\n                      "),n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleFmtDelParam(i,a,l)}}})],1)})],2)}),n("div",{staticStyle:{"text-align":"right"}},[n("span",[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleFmtAddFunc(i)}}},[t._v("添加验证函数")])])])],2)}),n("div",{staticStyle:{"text-align":"right","margin-right":"10px"}},[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleFmtAddSlot()}}},[t._v(" 添加槽位 ")])])],2),n("div",{staticClass:"tp-checker-container tp-sec-container"},[n("span",{staticClass:"title"},[t._v("槽位验证")]),t._l(t.checker,function(e,i){return n("div",{key:i,staticClass:"tp-checker-info"},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",right:"10px"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleCheckerDelSlot(i)}}})]),n("span",[t._v(" 槽      位:   ")]),n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.slot,callback:function(n){t.$set(e,"slot",n)},expression:"checkerInfo.slot"}})],1),n("br"),t._l(e.funcs,function(e,a){return n("div",{key:a,staticClass:"tp-slot-func",staticStyle:{"margin-left":"20px"}},[n("div",{staticStyle:{"text-align":"left","padding-left":"20px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",right:"10px"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleCheckerDelFunc(i,a)}}},[t._v("  删除函数")])]),t._v("\n                    \n                验证函数:  "),n("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini"},model:{value:e.checker_name,callback:function(n){t.$set(e,"checker_name",n)},expression:"funcInfo.checker_name"}}),t._v("\n\n                  "),n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleCheckerAddParam(i,a)}}},[t._v("添加参数")])],1),t._l(e.params,function(e,l){return n("div",{key:l,staticStyle:{"text-align":"left","padding-left":"80px",margin:"5px 0px 5px 0px"}},[t._v("\n                     参数名:  "),n("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini"},model:{value:e.key,callback:function(n){t.$set(e,"key",n)},expression:"param.key"}}),t._v("\n                     参数值:  "),n("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini"},model:{value:e.val,callback:function(n){t.$set(e,"val",n)},expression:"param.val"}}),t._v("\n                      "),n("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.handleCheckerDelParam(i,a,l)}}})],1)})],2)}),n("div",{staticStyle:{"text-align":"right"}},[n("span",[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleCheckerAddFunc(i,"checker")}}},[t._v("添加验证函数")])])])],2)}),n("div",{staticStyle:{"text-align":"right","margin-right":"10px"}},[n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.handleCheckerAddSlot()}}},[t._v(" 添加槽位 ")])])],2),n("div",{staticClass:"demo-drawer__footer",staticStyle:{"text-algin":"right",position:"relative"}},[n("div",{staticStyle:{float:"right","padding-right":"20px","margin-top":"5px"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleCancel()}}},[t._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleConfirm()}}},[t._v("确 定")])],1)])])},a=[],l=(n("ac6a"),n("456d"),n("2ef0")),o=n.n(l),s=n("2b75"),r={describe:{domain:"surround",sub_domain:"traffic",intent:"surrd_bus",slots:["abc","def"],version:"long-toB-1-v2",intent_type:"general/loop",loop_main_key:"array_slot_name"},templates:[{slots:["abc","xyz","cde"],trigger:{},texts:["",""],rely_group:{},group_id:0},{slots:["abc","xyz"],trigger:{},texts:["",""],group_id:0},{slots:["kkk","xxx"],trigger:{},texts:["",""],rely_group:{},group_id:1}],keywords:[""],fmt:{slot_a_name:[{fmt_name:"abc",param:{k1:"v1"}}]},rely_intent:{type:"operator",value:"",child:[{type:"value",value:"intent_name"}]},checker:{slot_abc:[{checker_name:"abc",params:{k1:"v1",k2:"v2"}},{checker_name:"xyz",params:{k1:"v1",k2:"v2"}}]}},c={name:"templateEdit",components:{conditionGroup:s["a"]},props:{templateData:{type:Object,default:function(){return r}}},watch:{templateData:{handler:function(t,e){this.templateInfo=o.a.cloneDeep(t),this.describe=this.templateInfo.describe,this.templates=this.templateInfo.templates,this.keywords=this.templateInfo.keywords,this.fmt=this.obj_to_arr(this.templateInfo.fmt),this.rely_intent=this.templateInfo.rely_intent,this.checker=this.obj_to_arr(this.templateInfo.checker)},immediate:!0}},data:function(){return{templateInfo:o.a.cloneDeep(this.templateData),describe:void 0,templates:void 0,keywords:void 0,fmt:void 0,rely_intent:void 0,checker:void 0,inputSlotVisible:!1,newSlotTag:"",inputKeywordVisible:!1,inputKeywordValue:"",inputIntentVisible:!1,inputIntentValue:"",innerSlotTag:"",innerSlotIndex:-1}},methods:{handleSlotTagClose:function(t){this.describe.slots.splice(this.describe.slots.indexOf(t),1)},handleSlotTagInputConfirm:function(){var t=this.newSlotTag;console.log("触发槽位添加确认函数, 当前输入的槽位为: ",t),t&&this.describe.slots.push(t),this.inputSlotVisible=!1,this.newSlotTag=""},showSlotInput:function(){var t=this;this.inputSlotVisible=!0,this.$nextTick(function(e){t.$refs.saveSlotTagInput.$refs.input.focus()})},handleKeywordClose:function(t){this.keywords.splice(this.keywords.indexOf(t),1)},handleKeywordInputConfirm:function(){var t=this.inputKeywordValue;console.log("触发槽位添加确认函数, 当前输入的槽位为: ",t),t&&this.keywords.push(t),this.inputKeywordVisible=!1,this.inputKeywordValue=""},showKeywordInput:function(){var t=this;this.inputKeywordVisible=!0,this.$nextTick(function(e){t.$refs.saveKeywordTagInput.$refs.input.focus()})},handleInentTagClose:function(t){this.rely_intent.child.splice(this.rely_intent.child.indexOf(t),1)},handleIntentInputConfirm:function(){var t=this.inputIntentValue;if(console.log("触发槽位添加确认函数, 当前输入的槽位为: ",t),t){var e={type:"value",value:t};this.rely_intent.child.push(e)}this.inputIntentVisible=!1,this.inputIntentValue=""},showIntentInput:function(){var t=this;this.inputIntentVisible=!0,this.$nextTick(function(e){t.$refs.saveIntentTagInput.$refs.input.focus()})},handleInnerSlotTagClose:function(t,e){this.templates[t].slots.splice(this.templates[t].slots.indexOf(e),1)},handleInnerSlotTagInputConfirm:function(t){var e=this.innerSlotTag;console.log("触发槽位添加确认函数, 当前输入的槽位为: ",e),e&&this.templates[t].slots.push(e),this.innerSlotIndex=-1,this.innerSlotTag=""},showInnerSlotInput:function(t){var e=this;this.innerSlotIndex=t,this.$nextTick(function(n){e.$refs.saveInnerSlotTagInput[t].$refs.input.focus()})},handleDelTemplateText:function(t,e){this.templates[t].texts.splice(e,1)},handleAddTemplateText:function(t){this.templates[t].texts.push("")},handleAddTemplate:function(){var t={slots:[],trigger:{type:"op",value:"AND",child:[]},texts:[],rely_group:{},group_id:0};this.templates.push(o.a.cloneDeep(t))},handleDelTemplate:function(t){this.templates.splice(t,1)},handleValueChangeEvent:function(t){var e=t["index"],n=t["newVal"];this.templates[e].trigger.value=n},obj_to_arr:function(t){var e=this,n=[];for(var i in Object.keys(t)){var a=Object.keys(t)[i],l=t[a];console.log("当前的属性为: ",a),console.log("属性对应的值为: ",l),l.map(function(t){t.params?t.params=e.param_to_arr(t.params):t.param&&(t.param=e.param_to_arr(t.param))});var o={slot:a,funcs:l};n.push(o)}return n},arr_to_obj:function(t){var e=this,n={};for(var i in t){var a=t[i],l=a["slot"],o=a["funcs"];o.map(function(t){void 0!==t.params&&(t.params=e.arr_to_param(t.params)),void 0!==t.param&&(t.param=e.arr_to_param(t.param))}),n[l]=o}return n},param_to_arr:function(t){var e=[],n=Object.keys(t);for(var i in n){var a=n[i],l=t[a],o={key:a,val:l};e.push(o)}return e},arr_to_param:function(t){var e={};for(var n in t){var i=t[n],a=i["key"],l=i["val"];e[a]=l}return e},handleFmtAddSlot:function(){var t={slot:"",funcs:[]};this.fmt.push(t)},handleFmtDelSlot:function(t){this.fmt.splice(t,1)},handleFmtAddFunc:function(t){var e={fmt_name:"",params:[]};this.fmt[t].funcs.push(e)},handleFmtDelFunc:function(t,e){this.fmt[t].funcs.splice(e,1)},handleFmtAddParam:function(t,e){var n={key:"",val:""};this.fmt[t].funcs[e].params.push(n)},handleFmtDelParam:function(t,e,n){this.fmt[t].funcs[e].params.splice(n,1)},handleCheckerAddSlot:function(){var t={slot:"",funcs:[]};this.checker.push(t)},handleCheckerDelSlot:function(t){this.checker.splice(t,1)},handleCheckerAddFunc:function(t,e){var n={checker_name:"",params:[]};this.checker[t].funcs.push(n)},handleCheckerDelFunc:function(t,e){this.checker[t].funcs.splice(e,1)},handleCheckerAddParam:function(t,e){var n={key:"",val:""};this.checker[t].funcs[e].params.push(n)},handleCheckerDelParam:function(t,e,n){this.checker[t].funcs[e].params.splice(n,1)},swapItem:function(t,e,n){t[e]=t.splice(n,1,t[e])[0]},handleTransup:function(t,e){0!==e&&this.swapItem(t,e,e-1)},handleTransdown:function(t,e){e!==t.length-1&&this.swapItem(t,e,e+1)},handleCancel:function(){console.log("处理取消脚本编辑内容");var t={};this.describe=o.a.cloneDeep(this.templateData).describe,this.tempaltes=o.a.cloneDeep(this.templateData).templates,this.keywords=o.a.cloneDeep(this.templateData).keywords,this.fmt=o.a.cloneDeep(this.templateData).fmt,this.rely_intent=o.a.cloneDeep(this.templateData).rely_intent,this.checker=o.a.cloneDeep(this.templateData).checker,this.$emit("cancel",t)},handleConfirm:function(){console.log("处理确认脚本编辑内容");var t={id:this.templateData.id,creator:this.templateData.creator,createTime:this.templateData.createTime,describe:o.a.cloneDeep(this.describe),templates:o.a.cloneDeep(this.templates),keywords:o.a.cloneDeep(this.keywords),fmt:this.arr_to_obj(o.a.cloneDeep(this.fmt)),rely_intent:o.a.cloneDeep(this.rely_intent),checker:this.arr_to_obj(o.a.cloneDeep(this.checker))};this.$emit("confirm",t)}},created:function(){},mounted:function(){console.log("当前 checker 函数为: ",JSON.stringify(this.checker)),console.log("当前的fmt 函数配置为: ",JSON.stringify(this.fmt))}},u=c,d=(n("7ac8"),n("2877")),p=Object(d["a"])(u,i,a,!1,null,"7c45c6a8",null);e["a"]=p.exports},"22c0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ef-cate-editor"},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-input",{staticStyle:{width:"95%"},attrs:{size:"mini",placeholder:"输入关键字进行过滤","suffix-icon":"el-icon-search"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("el-col",{attrs:{span:8}},[n("div",{staticStyle:{"vertical-align":"middle"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"show"===t.cateType,expression:"cateType === 'show'"}],staticStyle:{"font-size":"13px",color:"black",display:"inline-block"},attrs:{type:"text",icon:"el-icon-menu"},on:{click:t.edit_category}},[t._v(" 场景管理")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.cateType,expression:"cateType === 'edit'"}],attrs:{size:"mini"},on:{click:t.create_category}},[t._v(" 新建一级类目")])],1)])],1),n("div",{staticClass:"ef-cate-tree",style:t.treeStyle,attrs:{id:"cate-tree-container-"+t.cateType}},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{id:"cate-tree",data:t.data,props:t.defaultProps,"filter-node-method":t.filterNode,"expand-on-click-node":!1,"render-content":t.toggle_renderContent,"default-expand-all":""},on:{"node-click":t.trigger_treenode}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showCateAppend&&"edit"===t.cateType,expression:"showCateAppend && cateType === 'edit'"}],staticClass:"ef-append-cate",staticStyle:{height:"74px","border-radius":"5px",width:"80%",background:"#F2F6FC",padding:"5px 5px 5px 5px"}},[n("span",[t._v("类目名称: ")]),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.newCate,callback:function(e){t.newCate=e},expression:"newCate"}}),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{staticStyle:{"font-size":"20px",color:"#F56C6C"},attrs:{size:"mini",type:"text"},on:{click:t.handleCancelAddCategory}},[n("i",{staticClass:"el-icon-error"})]),n("el-button",{staticStyle:{"font-size":"20px",color:"#67C23A"},attrs:{size:"mini",type:"text"},on:{click:t.handleConfirmAddCategory}},[n("i",{staticClass:"el-icon-success"})])],1)],1)],1),n("el-dialog",{attrs:{title:"场景编辑","append-to-body":"",visible:t.showCategoryEdit},on:{"update:visible":function(e){t.showCategoryEdit=e}}},[n("span",[t._v("场景名称:")]),n("el-input",{attrs:{placeholder:"新建场景名称"},model:{value:t.curCategory,callback:function(e){t.curCategory=e},expression:"curCategory"}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.handleCancelCategoryEdit}},[t._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleConfirmCategoryEdit}},[t._v("确 定")])],1)],1)],1)},a=[],l=(n("ac6a"),n("28a5"),n("6b54"),n("c5f6"),n("b46e")),o={name:"domain-editor",props:{treeheight:{type:Number,default:180},cateType:{type:String,default:"show"},data:{type:Array,default:function(){return[]}}},watch:{filterText:function(t){this.$refs.tree.filter(t)},showCateAppend:function(t){t&&this.$nextTick(function(){var t=document.getElementById("cate-tree-container-edit");console.log("树形组件的容器 div 为: ",t),console.log("树形组件 height: ",t.scrollHeight),t.scrollTop=t.scrollHeight+74,console.log("树形控件滑动后的距离为: ",t.scrollTop)})}},data:function(){return{showCategoryEdit:!1,curCategory:"",curCategoryNode:"",categoryOpType:void 0,filterText:"",defaultProps:{children:"children",label:"label",show:!1},showCateAppend:!1,newCate:"",treeStyle:{height:this.treeheight+"px",border:"0px solid lightgrey"}}},mounted:function(){},methods:{uuid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},uuid2:function(t,e){var n,i,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(e=e||a.length,t)for(n=0;n<t;n++)l[n]=a[0|Math.random()*e];else for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",n=0;n<36;n++)l[n]||(i=0|16*Math.random(),l[n]=a[19==n?3&i|8:i]);return l.join("")},edit_category:function(){console.log("发出编辑类目事件"),this.$emit("openCateEdit","")},create_category:function(){console.log("发出创建类目事件"),this.$emit("createCateEdit",""),this.showCateAppend=!0},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},refresh_node:function(t){if(t.show=!1,void 0!==t.children&&t.children.length>0)for(var e=0;e<t.children.length;e++)this.refresh_node(t.children[e])},trigger_treenode:function(t){var e=this;console.log("点击了节点",t.label,t.id,t.show,t),console.log("点击节点的父节点是: {}"),console.log("加载的 类别数据为: ",JSON.stringify(this.data)),this.$nextTick(function(){for(var n=0;n<e.data.length;n++)e.refresh_node(e.data[n]);t.show=!t.show});var n=this.findParentId(this.data,t.id,"id");console.log("当前点击的路径为: ",n),this.$emit("cateSelected",n)},findParentId:function(t,e,n){var i=[],a=!1,l=function t(e,l){e.forEach(function(e){a||(i.push({cateId:e.id,cateName:e.label}),e[n]===l?a=!0:Array.isArray(e.children)&&e.children.length?t(e.children,l):i.pop())}),a||i.pop()};return l(t,e),i},toggle_renderContent:function(t,e){var n=this,i=e.node,a=e.data;e.store;return"edit"===this.cateType?t("span",{class:"custom-tree-node"},[t("span",[i.label]),a.show?t("span",[t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-plus"},style:"font-size:10px;",on:{click:function(){return n.append(i,a)}}},["平级"]),t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-plus"},style:"font-size:10px;",on:{click:function(){return n.appendSub(i,a)}}},["下级"]),t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},style:"font-size:10px;",on:{click:function(){return n.edit(i,a)}}}),t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},style:"font-size:10px;",on:{click:function(){return n.remove(i,a)}}})]):""]):t("span",{class:"custom-tree-node"},[t("span",[i.label])])},handleCancelAddCategory:function(){console.log("取消添加一级类别"),this.showCateAppend=!1,this.newCate=""},handleConfirmAddCategory:function(){if(console.log("添加新的一级类别"),""!==this.newCate){var t={userId:"user_cate",botId:"bot_cate",id:this.uuid2(16,16),catename:this.newCate,parentId:-1};Object(l["a"])(t),console.log("添加新的一级类别，传入参数为: ",t),this.$emit("reloadCategory",""),this.newCate=""}else console.log("当前类别数据为空， 添加失败");this.showCateAppend=!1},append:function(t,e){console.log("触发添加平级Cate: ",t),this.showCategoryEdit=!0,this.curCategoryNode=t,this.categoryOpType="addbro"},appendSub:function(t,e){console.log("触发添加子级Cate: ",t),this.showCategoryEdit=!0,this.curCategoryNode=t,this.categoryOpType="addchild"},edit:function(t,e){console.log("触发编辑当前类目: ",t),this.showCategoryEdit=!0,this.curCategoryNode=t,this.categoryOpType="edit",this.curCategory=t.data.label},remove:function(t,e){var n=this;console.log("触发移除当前类目: ",e);e=t.data;var i={userId:"user_cate",botId:"bot_cate",id:e.id,catename:e.label,parentId:e.parentId};this.$confirm("警告: 删除类别会将当前类别下的子类别和包含的faq同时删除! 确定要删除当前类别么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l["c"])(i).then(function(t){n.$message({message:"类别删除成功",type:"success",center:!0}),n.$emit("reloadCategory","")}).catch(function(){n.$message({message:"类别删除失败",type:"error",center:!0})})}).catch(function(){n.$message({message:"取消类别删除",type:"info",center:!0})})},handleCategoryEdit:function(){var t=this,e=this.curCategoryNode;if("addbro"===this.categoryOpType){var n=e.data,i=n.parentId,a=(n.level,{});if(console.log("当前处理添加平级类别的事件: ",n),-1!==i){e.parentNode;console.log("当前添加的不是顶级类别!"),a={userId:"user_cate",botId:"bot_cate",id:this.uuid2(16,16),catename:this.curCategory,parentId:i}}else console.log("当前添加的是顶级类别!"),a={userId:"user_cate",botId:"bot_cate",id:this.uuid2(16,16),catename:this.curCategory,parentId:-1};console.log("节点创建参数为: ",a),Object(l["a"])(a),this.$emit("reloadCategory","")}else if("addchild"===this.categoryOpType){n=e.data;console.log("当前添加的是子级类别"),a={userId:"user_cate",botId:"bot_cate",id:this.uuid2(16,16),catename:this.curCategory,parentId:n.id},console.log("添加参数为: ",a),Object(l["a"])(a),this.$emit("reloadCategory","")}else if("edit"===this.categoryOpType){n=e.data;a={userId:"user_cate",botId:"bot_cate",id:n.id,catename:this.curCategory,parentId:n.parentId},console.log("当前处理的类别更新事件， 更新参数为: ",a),Object(l["h"])(a).then(function(e){t.$emit("reloadCategory","")})}else console.log("该节点操作",this.categoryOpType,"还没有对应的处理逻辑!")},handleCancelCategoryEdit:function(){this.showCategoryEdit=!1,this.curCategoryNode=void 0,this.categoryOpType=void 0,this.curCategory=""},handleConfirmCategoryEdit:function(){this.handleCategoryEdit(),this.showCategoryEdit=!1,this.curCategoryNode=void 0,this.categoryOpType=void 0,this.curCategory=""},flatten_tree:function(){},categoryLocation:function(t){t.parentId,t.id}}},s=o,r=(n("97a9"),n("2877")),c=Object(r["a"])(s,i,a,!1,null,null,null);e["a"]=c.exports},"2b75":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ef-cond-container",style:{width:t.groupWidth+"px;"}},[t.showCond?n("div",{staticClass:"ef-cond-item"},[n("div",{staticClass:"ef-cond-left",staticStyle:{display:"inline-block"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.children[0].value,callback:function(e){t.$set(t.children[0],"value",e)},expression:"children[0].value"}})],1),t._v("\n\n         \n\n        "),n("div",{staticClass:"ef-cond-op",staticStyle:{display:"inline-block"}},[n("el-select",{staticStyle:{width:"70px"},attrs:{size:"mini",placeholder:"请选择"},on:{change:t.handleValueChange},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}},t._l(t.relationOps,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("\n\n         \n\n        "),n("div",{staticClass:"ef-cond-right",staticStyle:{display:"inline-block"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.children[1].value,callback:function(e){t.$set(t.children[1],"value",e)},expression:"children[1].value"}})],1),t._v("\n\n          "),n("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"12px"},on:{click:t.handleDeleteCond}})]):n("div",{staticClass:"ef-cond-group"},[n("div",{staticClass:"cond-group-type",staticStyle:{"margin-bottom":"10px"}},[t._v("组合类型:  \n            \n            "),n("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",placeholder:"请选择"},on:{change:t.handleValueChange},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}},t._l(t.jointOps,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._l(t.children,function(e,i){return[n("div",{key:i},[n("el-row",[n("el-col",{attrs:{span:1}},[n("div",{staticStyle:{display:"inline-block","margin-right":"5px"}},[t._v(t._s(i)+" ")]),n("div",{staticStyle:{display:"inline-block","margin-left":"0px","padding-top":"0px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"-2px",top:"-18px"}},[n("i",{staticClass:"el-icon-caret-top",staticStyle:{"font-size":"15px"},on:{click:function(e){return t.handleTransup(t.children,i)}}})]),n("div",{staticStyle:{position:"absolute",left:"-2px",top:"-2px"}},[n("i",{staticClass:"el-icon-caret-bottom",staticStyle:{"font-size":"15px"},on:{click:function(e){return t.handleTransdown(t.children,i)}}})])])]),n("el-col",{attrs:{span:23}},[n("condition-group",{staticStyle:{display:"inline-block"},attrs:{index:i,type:t.children[i].type,value:t.children[i].value,children:t.children[i].child},on:{valChg:t.handleValueChangeEvent,"update:type":function(e){return t.$set(t.children[i],"type",e)},"update:children":function(e){return t.$set(t.children[i],"child",e)},delGroup:function(e){return t.handleDelGroupEvent(i)},delCond:function(e){return t.handleDelCondEvent(i)}}})],1)],1)],1)]}),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("span",{on:{click:function(e){return t.handleAddCondition()}}},[t._v("新建条件")]),t._v("|"),n("span",{on:{click:function(e){return t.handleAddConditionGroup()}}},[t._v("新建条件组")]),t._v("|"),n("span",{on:{click:function(e){return t.handleDeleteConditionGroup()}}},[t._v("删除条件组")])])],2)])},l=[],o=n("bd86"),s=(n("ac6a"),n("c5f6"),n("2ef0")),r=n.n(s),c={index:0,type:"op",value:"AND",child:[]},u={name:"conditionGroup",props:{index:{type:Number,default:-1},type:{type:String,default:c.type},value:{type:String,default:c.value},children:{type:Array,default:function(){return c.child}}},watch:{value:{handler:function(t,e){var n=this;this.$nextTick(function(){n.localValue=t})}}},computed:{hasGroup:function(){var t=!1;return this.children.forEach(function(e){"op"!==e.type||"AND"!==e.value&&"OR"!==e.value||(t=!0)}),t}},data:function(){return{localIndex:void 0,localType:this.type,localValue:this.value,localChildren:void 0,groupWidth:500,deltaWidth:50,jointOps:[{value:"AND",label:"AND"},{value:"OR",label:"OR"}],relationOps:[{value:">",label:">"},{value:"<",label:"<"},{value:">=",label:">="},{value:"<=",label:"<="},{value:"!=",label:"!="},{value:"=",label:"="}]}},methods:(i={handleAddCondition:function(){console.log("处理添加条件");var t=this.children.length,e={index:t,type:"op",value:"=",child:[{index:0,type:"value",value:this.children.length+"",child:[]},{index:1,type:"value",value:this.children.length+"",child:[]}]};this.children.push(r.a.cloneDeep(e))},handleAddConditionGroup:function(){console.log("处理添加条件组");var t=this.children.length,e={index:t,type:"op",value:"AND",child:[]};this.children.push(r.a.cloneDeep(e))},handleDeleteConditionGroup:function(){console.log("处理删除条件组"),this.$emit("delGroup",{})},handleDeleteCond:function(){console.log("处理删除条件"),this.$emit("delCond",{})},handleDelGroupEvent:function(t){console.log("接收到删除条件组信息",t),this.children.splice(t,1)},handleDelCondEvent:function(t){console.log("接收到删除条件事件",t),this.children.splice(t,1)},swapItemSet:function(t,e,n){var i=t[e];this.$set(t,e,t[n]),this.$set(t,n,i)},swapItem:function(t,e,n){t[e]=t.splice(n,1,t[e])[0]},swapItemValiad:function(t,e,n){if(n<e){var i=n;n=e,e=i}var a=t[e],l=t[n];return t.splice(n,1),t[e]=l,this.$nextTick(function(){t.splice(n,0,a)}),t},handleTransup:function(t,e){0!==e&&this.swapItem(t,e,e-1)},handleTransdown:function(t,e){e!==t.length-1&&this.swapItem(t,e,e+1)}},Object(o["a"])(i,"swapItem",function(t,e,n){t[e]=t.splice(n,1,t[e])[0]}),Object(o["a"])(i,"handleValueChange",function(t){var e={index:this.index,newVal:t};this.$emit("valChg",e)}),Object(o["a"])(i,"handleValueChangeEvent",function(t){var e=t["index"],n=t["newVal"];this.children[e].value=n}),i),created:function(){this.showCond="op"===this.type&&"AND"!==this.value&&"op"===this.type&&"OR"!==this.value},mounted:function(){}},d=u,p=(n("c9a3"),n("2877")),h=Object(p["a"])(d,a,l,!1,null,"5915a49c",null);e["a"]=h.exports},3508:function(t,e,n){},"456d":function(t,e,n){var i=n("4bf8"),a=n("0d58");n("5eda")("keys",function(){return function(t){return a(i(t))}})},"5eda":function(t,e,n){var i=n("5ca1"),a=n("8378"),l=n("79e5");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*l(function(){n(1)}),"Object",o)}},"702f":function(t,e,n){},"7ac8":function(t,e,n){"use strict";var i=n("702f"),a=n.n(i);a.a},"8f6c":function(t,e,n){},"97a9":function(t,e,n){"use strict";var i=n("3508"),a=n.n(i);a.a},aa77:function(t,e,n){var i=n("5ca1"),a=n("be13"),l=n("79e5"),o=n("fdef"),s="["+o+"]",r="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(t,e,n){var a={},s=l(function(){return!!o[t]()||r[t]()!=r}),c=a[t]=s?e(p):o[t];n&&(a[n]=c),i(i.P+i.F*s,"String",a)},p=d.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},b46e:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"h",function(){return r}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"i",function(){return d}),n.d(e,"f",function(){return p}),n.d(e,"g",function(){return h});var i=n("365c"),a="http://127.0.0.1:5003/api";function l(t){var e=a+"/createCategory";return i["a"].post(e,t)}function o(t){var e=a+"/deleteCategory";return i["a"].post(e,t)}function s(t){var e=a+"/allCategory";return i["a"].get(e,t)}function r(t){var e=a+"/updateCategory";return i["a"].post(e,t)}function c(t){var e=a+"/addQaexample";return i["a"].post(e,t)}function u(t){var e=a+"/deleteQaexample";return i["a"].post(e,t)}function d(t){var e=a+"/updateQaexample";return i["a"].post(e,t)}function p(t){var e=a+"/loadQaExamples";return i["a"].get(e,t)}function h(t){console.log("根据类别加载 FQA 样本数据: ",t);var e=a+"/searchQAExampleByCate";return i["a"].post(e,t)}},c5f6:function(t,e,n){"use strict";var i=n("7726"),a=n("69a8"),l=n("2d95"),o=n("5dbc"),s=n("6a99"),r=n("79e5"),c=n("9093").f,u=n("11e9").f,d=n("86cc").f,p=n("aa77").trim,h="Number",f=i[h],v=f,m=f.prototype,y=l(n("2aeb")(m))==h,g="trim"in String.prototype,x=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():p(e,3);var n,i,a,l=e.charCodeAt(0);if(43===l||45===l){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+e}for(var o,r=e.slice(2),c=0,u=r.length;c<u;c++)if(o=r.charCodeAt(c),o<48||o>a)return NaN;return parseInt(r,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(y?r(function(){m.valueOf.call(n)}):l(n)!=h)?o(new v(x(e)),n,f):x(e)};for(var b,_=n("9e1e")?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;_.length>k;k++)a(v,b=_[k])&&!a(f,b)&&d(f,b,u(v,b));f.prototype=m,m.constructor=f,n("2aba")(i,h,f)}},c9a3:function(t,e,n){"use strict";var i=n("8f6c"),a=n.n(i);a.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
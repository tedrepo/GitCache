(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e193f250"],{"6a3b":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intent-info-container"},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.intentInfo,expression:"intentInfo !== undefined"}],ref:"intentInfo",attrs:{model:t.intentInfo,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"意图名称: "}},[n("el-input",{attrs:{placeholder:"限制30个字符"},model:{value:t.intentInfo.intentName,callback:function(e){t.$set(t.intentInfo,"intentName",e)},expression:"intentInfo.intentName"}})],1),n("el-form-item",{attrs:{label:"用户询问: "}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabsActiveName,callback:function(e){t.tabsActiveName=e},expression:"tabsActiveName"}},[n("el-tab-pane",{staticStyle:{"max-height":"300px",overflow:"scroll"},attrs:{label:"划词配置",name:"slide"}},t._l(t.intentInfo.queryLst,function(e,o){return n("div",{key:o},[n("el-row",[n("el-col",{attrs:{span:20}},[n("div",{staticClass:"slide-block"},[n("div",{staticClass:"query-content-input"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"请输入样例问句"},model:{value:e.query,callback:function(n){t.$set(e,"query",n)},expression:"queryInfo.query"}})],1),n("el-col",{attrs:{span:4}},[n("el-checkbox",{staticClass:"query-strict-match-check",model:{value:e.isStricMatch,callback:function(n){t.$set(e,"isStricMatch",n)},expression:"queryInfo.isStricMatch"}},[t._v("严格匹配")])],1)],1)],1),n("el-collapse",{staticClass:"query-slide-collpase",on:{change:t.handleChange},model:{value:e.showSlide,callback:function(n){t.$set(e,"showSlide",n)},expression:"queryInfo.showSlide"}},[n("el-collapse-item",{attrs:{title:"标注关键短语",name:"1"}},[n("el-popover",{directives:[{name:"click-outside",rawName:"v-click-outside:handleOutsideClick",value:o,expression:"index",arg:"handleOutsideClick"}],ref:"slidePopover",refInFor:!0,staticClass:"entity-label-menu",staticStyle:{padding:"0px"},attrs:{placement:"bottom-end",title:"",width:"100",trigger:"manual",content:"这是一段内容,这是一段内容,这是一段内容,这是一段内容。"},model:{value:t.intentInfo.queryLst[o].slidePopoverShow,callback:function(e){t.$set(t.intentInfo.queryLst[o],"slidePopoverShow",e)},expression:"intentInfo.queryLst[index].slidePopoverShow"}},[n("ul",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"},on:{select:t.handleSelect}},[n("div",{staticClass:"entity-self-define",on:{click:function(e){return t.trigger_addSlot("normal")}}},[t._v("新建槽位")]),t._l(t.intentInfo.slotInfoLst,function(e,i){return n("li",{key:"s"+i,attrs:{index:"1"},on:{click:function(e){return t.addEntityTag("slot",o,i)}}},[t._v("\n                                                "+t._s(e.slotName)+"\n                                            ")])})],2)]),n("div",{ref:"queryPanel",refInFor:!0,staticClass:"div-slide-panel",on:{click:function(e){return t.getSlideframe(e,o)}}},[t._v(" "+t._s(e.query)+" ")])],1),n("el-collapse-item",{attrs:{title:"添加请求槽位",name:"2"}},[n("div",{ref:"queryReqSlotPanel",refInFor:!0,staticClass:"div-slide-panel"},[t._l(t.intentInfo.queryLst[o].reqSlots,function(e,i){return n("el-tag",{key:i,staticStyle:{margin:"0px 2px"},attrs:{closable:"",size:"mini","disable-transitions":!1},on:{close:function(n){return t.delReqSlot(o,e)}}},[t._v("\n                                            "+t._s(e.slotName)+"\n                                            ")])}),n("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:t.reqSlotQueryIndex===o,expression:" reqSlotQueryIndex === index"}],staticStyle:{width:"150px"},attrs:{"fetch-suggestions":t.querySearchAsync,size:"mini",placeholder:"请输入内容",placement:"bottom-end"},on:{select:t.handleSelect,input:function(e){return t.handleReqSlotInputConfirm(o)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleReqSlotInputConfirm(o)}},model:{value:t.curReqSlot,callback:function(e){t.curReqSlot=e},expression:"curReqSlot"}}),n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.showReqSlotInput(o)}}})],2)])],1)],1)]),n("el-col",{attrs:{span:4}},[n("i",{staticClass:"my-delete-icon el-icon-delete",on:{click:function(e){return t.deleteQueryInfo(o)}}})])],1)],1)}),0),n("el-tab-pane",{staticStyle:{"max-height":"300px",overflow:"scroll"},attrs:{label:"高级配置",name:"reg"}},t._l(t.intentInfo.regLst,function(e,o){return n("div",{key:o},[n("el-input",{staticStyle:{width:"90%","margin-top":"15px"},attrs:{placeholder:"输入意图规则"},model:{value:e.regContent,callback:function(n){t.$set(e,"regContent",n)},expression:"regInfo.regContent"}},[n("el-checkbox",{attrs:{slot:"append"},slot:"append",model:{value:e.isStrictMatch,callback:function(n){t.$set(e,"isStrictMatch",n)},expression:"regInfo.isStrictMatch"}},[t._v(" 严格匹配")])],1),n("i",{staticClass:"my-delete-icon el-icon-delete",on:{click:function(e){return t.deleteRegInfo(e,o)}}})],1)}),0)],1),n("span",{directives:[{name:"show",rawName:"v-show",value:"slide"===t.tabsActiveName,expression:"tabsActiveName==='slide'"}],staticClass:"add-new-query",on:{click:function(e){return t.addQueryInfo()}}},[t._v("+新增问句样例")]),n("div",{directives:[{name:"show",rawName:"v-show",value:"reg"===t.tabsActiveName,expression:"tabsActiveName==='reg'"}],staticClass:"add-new-query",on:{click:function(e){return t.addRegInfo()}}},[t._v("+新增规则样例")])],1),n("el-form-item",{attrs:{label:"槽位信息: "}},[n("el-table",{staticStyle:{width:"90%"},attrs:{data:t.intentInfo.slotInfoLst,border:"","max-height":"250",height:"250","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{prop:"slotName",label:"槽位名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.$index===t.coordinate.row&&0===t.coordinate.column,expression:"scope.$index === coordinate.row &&\n                        0 === coordinate.column"}],attrs:{size:"small"},on:{change:function(n){return t.handleSlotNameChange(e.$index)},blur:function(n){return t.handleBlur(0,e.$index)}},model:{value:e.row.slotName,callback:function(n){t.$set(e.row,"slotName",n)},expression:"scope.row.slotName"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.$index!==t.coordinate.row||0!==t.coordinate.column,expression:"scope.$index !== coordinate.row || coordinate.column !== 0"}],on:{click:function(n){return t.handleEdit(0,e.$index)}}},[t._v("\n                            "+t._s(e.row.slotName)+"\n                        ")])]}}])}),n("el-table-column",{attrs:{prop:"slotAlias",label:"槽位别名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.$index===t.coordinate.row&&1===t.coordinate.column,expression:"scope.$index === coordinate.row &&\n                        1 === coordinate.column"}],attrs:{size:"small"},on:{change:function(n){return t.handleSlotAliasChange(e.$index)},blur:function(n){return t.handleBlur(1,e.$index)}},model:{value:e.row.slotAlias,callback:function(n){t.$set(e.row,"slotAlias",n)},expression:"scope.row.slotAlias"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.$index!==t.coordinate.row||1!==t.coordinate.column,expression:"scope.$index !== coordinate.row || coordinate.column !== 1"}],on:{click:function(n){return t.handleEdit(1,e.$index)}}},[t._v("\n                            "+t._s(e.row.slotAlias)+"\n                        ")])]}}])}),n("el-table-column",{attrs:{prop:"slotSource",label:"实体来源"}}),n("el-table-column",{attrs:{prop:"tagLst",label:"实体标签",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tagLst,function(o,i){return n("el-tag",{key:i,attrs:{size:"mini",closable:""},on:{close:function(n){return t.handleEntTagClose(e.$index,o)}}},[t._v("\n                            "+t._s(o.tagVal)+"\n                            ")])})}}])}),n("el-table-column",{attrs:{prop:"isArr",label:"数组"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{model:{value:e.row.isArr,callback:function(n){t.$set(e.row,"isArr",n)},expression:"scope.row.isArr"}})]}}])}),n("el-table-column",{attrs:{label:"删除"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-delete",on:{click:function(n){return t.deleteSlotInfo(e.$index)}}})]}}])})],1),n("div",{staticClass:"add-new-query",on:{click:function(e){return t.openAddSlotDialog()}}},[t._v("+新增槽位")])],1)],1),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right","padding-right":"40px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleCancel()}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateIntent()}}},[t._v("确 定")])],1),n("el-dialog",{attrs:{title:"新增槽位",visible:t.showAddSlotDialog,"append-to-body":""},on:{"update:visible":function(e){t.showAddSlotDialog=e}}},[n("el-form",{attrs:{model:t.curSlotInfo}},[n("el-form-item",{attrs:{label:"槽位名称","label-width":"80"}},[n("el-input",{staticStyle:{width:"190px"},attrs:{autocomplete:"off"},model:{value:t.curSlotInfo.slotName,callback:function(e){t.$set(t.curSlotInfo,"slotName",e)},expression:"curSlotInfo.slotName"}})],1),n("el-form-item",{attrs:{label:"槽位别名","label-width":"80"}},[n("el-input",{staticStyle:{width:"190px"},attrs:{autocomplete:"off"},model:{value:t.curSlotInfo.slotAlias,callback:function(e){t.$set(t.curSlotInfo,"slotAlias",e)},expression:"curSlotInfo.slotAlias"}})],1),n("el-form-item",{attrs:{label:"实体类型","label-width":"80"}},[n("el-select",{attrs:{placeholder:"选择实体类型"},on:{change:t.selectentity},model:{value:t.curSlotInfo.slotSource,callback:function(e){t.$set(t.curSlotInfo,"slotSource",e)},expression:"curSlotInfo.slotSource"}},[n("el-option",{attrs:{label:"自定义实体",value:"自定义实体"},on:{click:function(e){return t.trigger_addEntity("normal")}}},[t._v("自定义实体")]),t._l(t.sysEntityList,function(t,e){return n("el-option",{key:"se"+e,attrs:{label:t,value:t}})}),t._l(t.userEntityList,function(t,e){return n("el-option",{key:"ue"+e,attrs:{label:t,value:t}})})],2)],1),n("el-form-item",{attrs:{label:"是否是数组","label-width":"80"}},[n("el-switch",{model:{value:t.curSlotInfo.isArr,callback:function(e){t.$set(t.curSlotInfo,"isArr",e)},expression:"curSlotInfo.isArr"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:t.cancelAddSlot}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmAddSlot}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{width:"90%",title:"新建名词",visible:t.entityVisible,"append-to-body":""},on:{"update:visible":function(e){t.entityVisible=e}}},[n("entityInfo",{ref:"entityedit",attrs:{userId:t.userId,botId:t.botId,entityNode:t.curEntityInfo},on:{updateEntity:t.updateEntity,cancelEntity:t.cancelEntity}})],1)],1)},s=[],l=n("bd86"),a=(n("20d6"),n("7514"),n("ac6a"),n("6b54"),n("a481"),n("2ef0")),r=n("706f"),c={bind:function(t,e,n){function o(o){if(t.contains(o.target))return!1;if(e.expression){var i=e.arg;console.log("接收到 的arg为: "+i),console.log("接收到的 value 为: "+e.value);var s=n.context;console.log("vnode中内容: ",s),s[e.arg](e.value)}}t.__vueClickOutside__=o,document.addEventListener("dblclick",o)},update:function(){},unbind:function(t,e){document.removeEventListener("dblclick",t.__vueClickOutside__),delete t.__vueClickOutside__}},u={name:"intentInfo",components:{entityInfo:r["a"]},props:{intentInfo:{type:Object,default:function(){}},botId:{type:String,default:"",require:!0},userId:{type:String,default:"",require:!0}},data:function(){return{entityVisible:!1,curEntityInfo:void 0,intentName:"",activeNames:["1"],tabsActiveName:"slide",collapseActiveName:"",dialogVisible:!1,showAddSlotDialog:!1,coordinate:{column:-1,row:-1},reqSlotQueryIndex:-1,newQueryInfo:{query:"",isStricMatch:!1,showSlide:"",slidewords:[]},curSlideword:{tagVal:"",slotName:"",slotAlias:"",slotSource:"",start:-1,end:-1},curReqSlot:"",curSlotInfo:{slotName:"",slotSource:"",slotAlias:"",tagLst:[],isArr:!1},sysEntityList:[]}},computed:{userEntityList:{get:function(){return this.$store.state.nlu.entityInfoList.map(function(t){return t.entityName})},set:function(t){}},slotInfoLst:function(){this.intentInfo.slotInfoLst}},mounted:function(){this.loadSystemEntityList(),this.heighlightAll()},methods:(o={selectentity:function(t){"自定义实体"===t&&(console.log("触发创建新的实体:",t),this.trigger_addEntity("normal"),this.curSlotInfo.slotSource="")},UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},loadSystemEntityList:function(){this.sysEntityList=["@sys.date","@sys.time","@sys.number","@sys.phone-number","@sys.date-time","@sys.geo-city","@sys.geo-province","@sys.geo-country","@sys.contry","@sys.age","@sys.address","@sys.email","@sys.duration","@sys.timeset","@sys.ordinal","@sys.express","@sys.receipt_object","@sys.receipt_type","@sys.receipt_form"]},loadUserEntityList:function(){this.userEntityList=this.$store.state.nlu.entityInfoList.map(function(t){return t.entityName})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},handleClick:function(t,e){},handleChange:function(t){},addQueryInfo:function(){var t={query:"",isStricMatch:!1,showSlide:"",slidewords:[],reqSlots:[]};this.intentInfo.queryLst.push(t),this.$message({type:"success",message:"增加一条新的例句"})},deleteQueryInfo:function(t){var e=this;console.log("当前删除的item index: "+t);var n=this;n.$confirm("将要删除第"+(t+1)+"条例句, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.intentInfo.queryLst.splice(t,1),n.$message({type:"success",message:"当前节点成功删除"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},deleteSlotInfo:function(t){var e=this;console.log("当前删除第: "+t+" 个 slot 的信息");var n=this;n.$confirm("将要删除第"+(t+1)+"个槽位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var o=e.intentInfo.slotInfoLst[t].tagLst.map(function(t){return t.tagVal}),i=e.intentInfo.slotInfoLst[t].slotName,s=0;s<e.intentInfo.queryLst.length;s++){var l=e.intentInfo.queryLst[s];l.slidewords=l.slidewords.filter(function(t){return!(o.indexOf(t.tagVal)>=0&&i===t.slotName)}),e.heighlight(s),l.reqSlots=l.reqSlots.filter(function(t){return t.slotName!==i})}e.intentInfo.slotInfoLst.splice(t,1),n.$message({type:"success",message:"当前节点成功删除"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},deleteTag:function(t,e){console.log("当前删除第: "+t+" 个 slot 的 tag: "+e);for(var n=this.intentInfo.slotInfoLst[t].slotName,o=0;o<this.intentInfo.queryLst.length;o++){var i=this.intentInfo.queryLst[o];i.slidewords=i.slidewords.filter(function(t){return console.log("cur slideword tag val: ",t.tagVal," slot name: ",t.slotName,e,n),e!==t.tagVal||n!==t.slotName}),this.heighlight(o)}},getSlideframe:function(t,e){if(document.body.createTextRange){document.body.createTextRange();console.log("IE 使用 document 获取 划取文本区间")}else{var n=window.getSelection(),o=n.toString(),i=n.anchorOffset,s=n.focusOffset;if(i>s)i=n.focusOffset,s=n.anchorOffset;var l=t.clientX,a=t.clientY;this.$refs.slidePopover[e].$refs.popper.style.position="fixed",this.$refs.slidePopover[e].$refs.popper.style.left=l+5+"px",this.$refs.slidePopover[e].$refs.popper.style.top=a+5+"px",i<s?(this.intentInfo.queryLst.forEach(function(t){t.slidePopoverShow=!1}),this.intentInfo.queryLst[e].slidePopoverShow=!0,this.loadUserEntityList()):this.intentInfo.queryLst.forEach(function(t){t.slidePopoverShow=!1}),console.log(o+" "+i+" "+s);t.target.innerText;var r=this.intentInfo.queryLst[e].query,c=r.indexOf(o),u=c+o.length-1;o.length>0&&(this.isValideRegin(e,c,u)?(this.curSlideword.tagVal=o,this.curSlideword.start=c,this.curSlideword.end=u):this.$message({duration:1500,message:"划词不能重叠",type:"warning"}))}},heighlight:function(t){for(var e=this.intentInfo.queryLst[t].query,n=e,o=0;o<this.intentInfo.queryLst[t].slidewords.length;o++){var i=this.intentInfo.queryLst[t].slidewords[o].tagVal;n=n.replace(i,'<span style="color:lightblue;">'+i+"</span>")}this.$refs.queryPanel[t].innerHTML=n},heighlightAll:function(){for(var t=0;t<this.intentInfo.queryLst.length;t++)console.log("执行height初始化 重绘"),this.heighlight(t)},addEntityTag:function(t,e,n){this.intentInfo.queryLst[e].slidewords.push(Object(a["cloneDeep"])(this.curSlideword));var o=this.intentInfo.queryLst[e].slidewords,i=this.intentInfo.queryLst[e].slidewords.length-1;if("slot"===t){var s=this.intentInfo.slotInfoLst[n],l=s.slotSource;s.tagLst.push(o[i]),this.intentInfo.queryLst[e].slidewords[i].slotName=s.slotName,this.intentInfo.queryLst[e].slidewords[i].slotSource=l,this.intentInfo.queryLst[e].slidewords[i].slotAlias=s.slotAlias,this.curSlideword={tagVal:"",slotName:"",slotSource:"",slotAlias:"",start:-1,end:-1}}else if("user"===entType){l=this.userEntityList[n];var r=this.intentInfo.slotInfoLst.filter(function(t){return t.slotName===l});r.length>0?r[0].tagLst.push(o[i]):this.intentInfo.slotInfoLst.push({slotName:l,slotSource:l,tagLst:[o[i]],isArr:!0}),this.intentInfo.queryLst[e].slidewords[i].slotName=l,this.intentInfo.queryLst[e].slidewords[i].slotSource=l,this.curSlideword={tagVal:"",slotName:"",slotSource:"",start:-1,end:-1}}this.heighlight(e),this.intentInfo.queryLst[e].slidePopoverShow=!1},isValideRegin:function(t,e,n){var o=this.intentInfo.queryLst[t].slidewords.map(function(t){return{start:t.start,end:t.end}}),i=!1;0==o.length&&(i=!0);for(var s=0;s<o.length;s++){var l=o[s];i=!(e<=l.end&&e>=l.start||n>=l.start&&n<=l.end)}return console.log("是否不重叠: "+i),i},handleSelect:function(t){console.log("选中slot:"+itme),this.curReqSlot=t.value},handleReqSlotInputConfirm:function(t){var e=this;if(console.log("确定添加 request slot"),""!==this.curReqSlot&&void 0!==this.curReqSlot){var n=this.intentInfo.slotInfoLst.find(function(t){return t.slotName===e.curReqSlot});console.log("添加的 req slot: ",n),this.intentInfo.queryLst[t].reqSlots.push({slotName:this.curReqSlot,slotSource:n.slotSource,slotAlias:n.slotAlias})}this.curReqSlot="",this.reqSlotQueryIndex=-1},showReqSlotInput:function(t){console.log("触发reqslot输入"),this.reqSlotQueryIndex=t,this.$nextTick(function(t){})},delReqSlot:function(t,e){var n=this.intentInfo.queryLst[t].reqSlots.findIndex(function(t){return t.slotName===e.slotName});this.intentInfo.queryLst[t].reqSlots.splice(n,1)},querySearchAsync:function(t,e){var n=this.intentInfo.slotInfoLst.map(function(t){return{value:t.slotName}}),o=n;e(o)},addRegInfo:function(){var t={regContent:"",isStrictMatch:!1};this.intentInfo.regLst.push(t),this.$message({type:"success",message:"增加一条意图匹配规则"})},deleteRegInfo:function(t,e){var n=this,o=this;o.$confirm("将要删除第"+(e+1)+"条意图匹配规则, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.intentInfo.regLst.splice(e,1),o.$message({type:"success",message:"当前节点成功删除"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},handleEdit:function(t,e){this.coordinate.column=t,this.coordinate.row=e},handleBlur:function(t,e){this.coordinate.column=-1,this.coordinate.row=-1},handleSlotNameChange:function(t){console.log("槽名改变事件: ",t);var e=this.intentInfo.slotInfoLst[t].slotName,n=this.intentInfo.slotInfoLst[t].tagLst.map(function(t){return t.tagVal}),o=this.intentInfo.slotInfoLst.map(function(t){return t.slotName});this.intentInfo.queryLst.forEach(function(t){t.slidewords.forEach(function(t){n.indexOf(t.tagVal)>-1&&(t.slotName=e)}),t.reqSlots.forEach(function(t){-1==o.indexOf(t.slotName)&&(t.slotName=e)})})},handleSlotAliasChange:function(t){console.log("槽别名改变事件: ",t);this.intentInfo.slotInfoLst[t].slotName;var e=this.intentInfo.slotInfoLst[t].slotAlias,n=this.intentInfo.slotInfoLst[t].tagLst.map(function(t){return t.tagVal}),o=this.intentInfo.slotInfoLst.map(function(t){return t.slotName});this.intentInfo.queryLst.forEach(function(t){t.slidewords.forEach(function(t){n.indexOf(t.tagVal)>-1&&(t.slotAlias=e)}),t.reqSlots.forEach(function(t){-1==o.indexOf(t.slotName)&&(t.slotAlias=e)})})}},Object(l["a"])(o,"handleSelect",function(t,e){console.log(t,e)}),Object(l["a"])(o,"handleEntTagClose",function(t,e){var n=this,o=this;o.$confirm("将要删除当前连接, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.intentInfo.slotInfoLst[t].tagLst.splice(n.intentInfo.slotInfoLst[t].tagLst.indexOf(e),1),n.deleteTag(t,e.tagVal),o.$message({type:"success",message:"当前节点成功删除"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})}),Object(l["a"])(o,"handleCancel",function(){this.$emit("cancelIntent")}),Object(l["a"])(o,"updateIntent",function(){this.$store.dispatch("nlu/updateIntentInfo",Object(a["cloneDeep"])(this.intentInfo)),this.$emit("updateIntent",Object(a["cloneDeep"])(this.intentInfo))}),Object(l["a"])(o,"handleOutsideClick",function(t){console.log(" 触发 菜单外部点击事件, 当前编辑的是第: "+t+" 个query"),this.intentInfo.queryLst.forEach(function(t){t.slidePopoverShow=!1})}),Object(l["a"])(o,"openAddSlotDialog",function(){console.log("打开add slot dialog"),this.showAddSlotDialog=!0}),Object(l["a"])(o,"cancelAddSlot",function(){this.curSlotInfo={slotName:"",slotSource:"",slotAlias:"",tagLst:[],isArr:!1},this.showAddSlotDialog=!1}),Object(l["a"])(o,"confirmAddSlot",function(){this.intentInfo.slotInfoLst.push(Object(a["cloneDeep"])(this.curSlotInfo)),this.curSlotInfo={slotName:"",slotSource:"",slotAlias:"",tagLst:[],isArr:!1},this.showAddSlotDialog=!1}),Object(l["a"])(o,"trigger_addSlot",function(){console.log("划词时触发添加槽位的事件"),this.openAddSlotDialog()}),Object(l["a"])(o,"trigger_addEntity",function(t){console.log("收到添加实体的事件"+t),this.entityVisible=!0,this.$nextTick(function(){this.$refs.entityedit.entityType(t)}),this.curEntityInfo={useId:this.userId,botId:this.botId,entityName:"",entityId:"ent_"+this.UUID(),entityValues:[{entityValue:"",synmous:[]}]}}),Object(l["a"])(o,"updateEntity",function(t){this.$store.dispatch("nlu/updateEntityInfo",t),this.userEntityList.push(t.entityName),this.curEntityInfo=void 0,this.loadUserEntityList(),this.entityVisible=!1}),Object(l["a"])(o,"cancelEntity",function(t){console.log("接收到取消事件"),this.entityVisible=!1,this.curEntityInfo=void 0}),o),directives:{clickOutside:c}},d=u,f=(n("e732"),n("2877")),h=Object(f["a"])(d,i,s,!1,null,null,null);e["a"]=h.exports},"706f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-info-container"},["normal"===t.entity_type?n("div",{staticClass:"normal-entity-page"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名词名称"}},[n("el-input",{attrs:{size:"small"},model:{value:t.entityInfo.entityName,callback:function(e){t.$set(t.entityInfo,"entityName",e)},expression:"entityInfo.entityName"}})],1),n("el-form-item",{attrs:{label:"名词成员"}},[n("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{border:"","max-height":"300px",height:"200px",data:t.entityInfo.entityValues,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{prop:"entityValue",label:"名词成员",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.$index==t.coordinate.row&&0==t.coordinate.column,expression:"scope.$index == coordinate.row &&\n                            0 == coordinate.column"}],attrs:{size:"small"},on:{blur:function(n){return t.handleBlur(0,e.$index)}},model:{value:e.row.entityValue,callback:function(n){t.$set(e.row,"entityValue",n)},expression:"scope.row.entityValue"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.$index!=t.coordinate.row,expression:"scope.$index != coordinate.row"}],on:{click:function(n){return t.handleEdit(0,e.$index)}}},[t._v("\n                                "+t._s(""!==e.row.entityValue?e.row.entityValue:"输入名词成员")+"\n                            ")])]}}],null,!1,2779925229)}),n("el-table-column",{attrs:{prop:"synmous",label:"同义词"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.synmous,function(o,i){return n("el-tag",{key:i,attrs:{closable:""},on:{close:function(n){return t.handleClose(e.$index,o)}}},[t._v("\n                                "+t._s(o)+"\n                            ")])}),t.entityInfo.entityValues[e.$index].inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"70px"},attrs:{size:"mini"},on:{blur:function(n){return t.handleInputConfirm(e.$index)}},model:{value:t.entityInfo.entityValues[e.$index].inputValue,callback:function(n){t.$set(t.entityInfo.entityValues[e.$index],"inputValue",n)},expression:"entityInfo.entityValues[scope.$index].inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(n){return t.showInput(e.$index)}}},[t._v("+ New Tag")])]}}],null,!1,2852100595)}),n("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-delete",on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}],null,!1,209753885)})],1),n("span",{on:{click:t.addEntItem}},[t._v("+ 添加词条 ")])],1)],1)],1):t._e(),"regex"===t.entity_type?n("div",{staticClass:"regex-entity-page"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"实体类名"}},[n("el-input",{attrs:{placeholder:"限制30个字符"},model:{value:t.entityNode.entityName,callback:function(e){t.$set(t.entityNode,"entityName",e)},expression:"entityNode.entityName"}})],1),n("el-form-item",{attrs:{label:"名词名称"}},[n("el-input",{attrs:{placeholder:"正则表达式"},model:{value:t.entityNode.regex,callback:function(e){t.$set(t.entityNode,"regex",e)},expression:"entityNode.regex"}})],1),n("el-form-item",{attrs:{label:"测试正则表达式"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.entityNode.entityName,callback:function(e){t.$set(t.entityNode,"entityName",e)},expression:"entityNode.entityName"}})],1),n("el-form-item",{attrs:{label:"测试结果"}},[n("span",{ref:"regex-test-results"})])],1)],1):t._e(),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("创建")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onCancel}},[t._v("取消")])],1)])},i=[],s=(n("ac6a"),n("2ef0")),l={name:"entity-info",props:{entityNode:{type:Object,default:function(){}},userId:{type:String,default:""},botId:{type:String,default:""}},computed:{},data:function(){return{entity_type:"normal",regex_test_content:[],form:{},entityInfo:{},coordinate:{column:-1,row:-1}}},methods:{initEntInfo:function(){var t=Object(s["cloneDeep"])(this.entityNode);return t.entityValues.forEach(function(t){t.inputVisible=!1,t.inputValue=""}),t},handleInputConfirm:function(t){console.log("完成"+t+"词条添加同义词"),this.entityInfo.entityValues[t].synmous.push(this.entityInfo.entityValues[t].inputValue),this.entityInfo.entityValues[t].inputVisible=!1,this.entityInfo.entityValues[t].inputValue=""},showInput:function(t){console.log("为"+t+"词条添加同义词"),this.entityInfo.entityValues[t].inputVisible=!0},handleClose:function(t,e){var n=this,o=this;o.$confirm("将要删除该同义词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.entityInfo.entityValues[t].synmous.splice(n.entityInfo.entityValues[t].synmous.indexOf(e),1),o.$message({type:"success",message:"当前同义词成功删除"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},handleEdit:function(t,e){this.coordinate.column=t,this.coordinate.row=e},handleBlur:function(t,e){this.coordinate.column=-1,this.coordinate.row=-1},handleDelete:function(t,e){var n=this,o=this;o.$confirm("将要删除当前词条, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.entityInfo.entityValues.splice(t,1),o.$message({type:"success",message:"当前词条成功删除"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},entityType:function(t){this.entity_type=t},onSubmit:function(){console.log("触发创建操作: "+this.entityNode.entityName),this.entityInfo.userId=this.userId,this.entityInfo.botId=this.botId,this.$emit("updateEntity",this.entityInfo)},onCancel:function(){this.$emit("cancelEntity",this.entityNode)},addEntItem:function(){this.entityInfo.entityValues.push({entityValue:"",synmous:[],inputVisible:!1,inputValue:""}),this.$message({type:"success",message:"新增一个词条"})}},mounted:function(){},watch:{entityNode:{handler:function(t,e){void 0!==t&&(this.entityInfo=this.initEntInfo())},immediate:!0,deep:!0}}},a=l,r=n("2877"),c=Object(r["a"])(a,o,i,!1,null,"9b2ee192",null);e["a"]=c.exports},a4f7:function(t,e,n){},e732:function(t,e,n){"use strict";var o=n("a4f7"),i=n.n(o);i.a}}]);
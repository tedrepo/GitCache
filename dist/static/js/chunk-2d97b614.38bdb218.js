(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d97b614"],{"00fd":function(t,e,n){},"15e4":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bot-init-container"},[n("el-row",{staticStyle:{"margin-bottom":"20p","margin-top":"40px"}},[t._t("header"),n("el-col",{attrs:{span:7}},[n("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"30px"},attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.searchBotByName,callback:function(e){t.searchBotByName=e},expression:"searchBotByName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("el-col",{attrs:{span:2}})],2),n("card-panel",{attrs:{cardInfoList:t.botInfoList},on:{addCardItem:t.addCardItem},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{height:"calc(70% - 10px)","padding-top":"15px","padding-left":"15px",position:"relative"}},[n("div",{staticStyle:{float:"left"}},[t._v("Bot-"+t._s(e.cardInfo.bot_name)+" ")]),n("i",{staticClass:"el-icon-setting",staticStyle:{float:"right","margin-right":"20px"},on:{click:function(n){return t.editCardItem(e.cardInfo.bot_id)}}}),n("i",{staticClass:"el-icon-edit",staticStyle:{float:"right","margin-right":"10px"},on:{click:function(n){return t.openBotContent(e.cardInfo.bot_id)}}}),n("div",{staticStyle:{"margin-top":"35px"}},[t._v(" "+t._s(e.cardInfo.desc)+" ")])]),n("div",{staticStyle:{"padding-left":"10px","padding-right":"7px","border-top":"1px solid lightgray"}},[n("span"),n("div",{staticClass:"bottom clearfix"},[n("time",{staticClass:"time"},[t._v("创建时间:")]),n("el-button",{staticClass:"button",attrs:{type:"text"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(n){return t.handleDeleteCard(e.cardInfo.bot_id)}}})])],1)])]}}])}),n("el-dialog",{attrs:{title:"机器人设置",visible:t.showBotSetDialog,width:"80%","before-close":t.handleDialogClose},on:{"update:visible":function(e){t.showBotSetDialog=e}}},[n("botSetting",{attrs:{botInfo:t.curBotInfo,botInfoIndex:t.curBotInfoIndex},on:{"update:botSetting":t.handleBotInfoUpdate,"cancel:botSetting":t.handleBotInfoCancel}})],1)],1)},i=[],a=n("7ab0"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("StepLine",{attrs:{stepInfoArr:t.stepInfoArr,activeIndex:t.activeIndex},on:{"update:activeIndex":t.updateActiveIndex}},[0===t.activeIndex?n("div",{staticClass:"basicInfo"},[n("BotBasicSetting",{attrs:{botInfo:t.botInfo},on:{"update:basicSetting":t.updateBasicSetting,"cancel:basciSetting":function(t){}}})],1):t._e(),1===t.activeIndex?n("div",{staticClass:"basicConfig"},[n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("完成")]),n("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)]):t._e()])],1)},c=[],r=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stepLineContainer"},[t._m(0),n("div",{staticClass:"StepLineBox"},[n("el-steps",{attrs:{active:t.activeInfo},on:{"update:active":function(e){t.activeInfo=e}}},t._l(t.stepInfoArr,function(t,e){return n("el-step",{key:e,attrs:{title:t}})}),1),t._t("default")],2)])}),l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stepLineTile"},[n("p",[t._v("title")])])}],u={name:"stepLine",props:{stepInfoArr:{type:Array,required:!1},activeIndex:{type:Number,default:0}},data:function(){return{}},methods:{prev:function(){--this.activeInfo,this.activeInfo<0&&(this.activeInfo=0)},next:function(){this.activeInfo++>3&&(this.activeInfo=0)}},computed:{activeInfo:{get:function(){return this.activeIndex},set:function(t){this.$emit("update:activeIndex",t),this.activeIndex=t}},stepInfoArrLen:{get:function(){return this.stepInfoArr.length}}}},d=u,f=(n("efe4"),n("2877")),b=Object(f["a"])(d,r,l,!1,null,"f49bd48c",null),p=b.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bot-setting-container"},[n("el-form",{ref:"form",attrs:{model:t.botInfo,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"机器人名称"}},[n("el-input",{model:{value:t.botInfo.bot_name,callback:function(e){t.$set(t.botInfo,"bot_name",e)},expression:"botInfo.bot_name"}})],1),n("el-form-item",{attrs:{label:"机器人技能"}},[n("el-checkbox-group",{model:{value:t.botInfo.bot_skill,callback:function(e){t.$set(t.botInfo,"bot_skill",e)},expression:"botInfo.bot_skill"}},[n("el-checkbox",{attrs:{label:"chat",name:"type"}}),n("el-checkbox",{attrs:{label:"task",name:"type"}}),n("el-checkbox",{attrs:{label:"mc",name:"type"}}),n("el-checkbox",{attrs:{label:"qa",name:"type"}})],1)],1),n("el-form-item",{attrs:{label:"机器人性别"}},[n("el-radio-group",{model:{value:t.botInfo.bot_sex,callback:function(e){t.$set(t.botInfo,"bot_sex",e)},expression:"botInfo.bot_sex"}},[n("el-radio",{attrs:{label:"男"}}),n("el-radio",{attrs:{label:"女"}})],1)],1),n("el-form-item",{attrs:{label:"机器人描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.botInfo.desc,callback:function(e){t.$set(t.botInfo,"desc",e)},expression:"botInfo.desc"}})],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("下一步")]),n("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},I=[],g={name:"BotBasicSetting",props:{botInfo:{type:Object,default:function(){return{bot_name:"",bot_skill:[],bot_sex:"",desc:""}}}},data:function(){return{}},methods:{onSubmit:function(){console.log("submit!"),this.$emit("update:basicSetting",this.botInfo)},onCancel:function(){console.log("cancel"),this.$emit("cancel:basciSetting")}}},m=g,v=(n("a776"),Object(f["a"])(m,h,I,!1,null,null,null)),_=v.exports,S={name:"botSetting",props:{botInfo:{type:Object,default:function(){return{bot_name:"",bot_skill:[],bot_sex:"",desc:""}}},botInfoIndex:{type:Number,default:-1}},components:{StepLine:p,BotBasicSetting:_},data:function(){return{botSetDialogShow:!1,stepInfoArr:["初始化机器人","完成"],activeIndex:0,basicInfo:{}}},methods:{openBotSetDialog:function(){this.botSetDialogShow=!0},handleDialogClose:function(){this.botSetDialogShow=!1},updateActiveIndex:function(t){this.activeIndex=t},updateBasicSetting:function(t){this.basicInfo=t,this.activeIndex+=1,console.log("接收到basic Info: "+t)},cancelBasciSetting:function(){this.activeIndex-=1,this.botSetDialogShow=!1},onSubmit:function(){this.activeIndex=0,this.botSetDialogShow=!1,this.$emit("update:botSetting",this.basicInfo,this.botInfoIndex)},onCancel:function(){this.activeIndex=0,this.botSetDialogShow=!1,this.$emit("cancel:botSetting")}}},x=S,y=Object(f["a"])(x,s,c,!1,null,null,null),B=y.exports,C=n("eee3"),k={name:"initBot",components:{cardPanel:a["a"],botSetting:B},data:function(){return{userId:"user_1",showBotSetDialog:!1,botInfoList:[],searchBotByName:"",emptyBotInfo:{bot_name:"bot",botImg:""},curBotInfo:{},curBotInfoIndex:-1,currentDate:new Date}},methods:{addCardItem:function(){console.log("接收到添加item的事件"),this.showBotSetDialog=!0,this.curBotInfoIndex=this.botInfoList.length,this.curBotInfo={bot_name:"111",bot_id:"bot_"+this.$util.uuid(),bot_skill:[],bot_sex:"",desc:""}},editCardItem:function(t){this.curBotInfo=this.botInfoList.filter(function(e){return e.bot_id===t})[0],console.log("当前的机器人信息为: "),console.log(this.curBotInfo),this.showBotSetDialog=!0},openBotSetDialog:function(t){this.showBotSetDialog=!0},handleDialogClose:function(){this.showBotSetDialog=!1},handleBotInfoUpdate:function(t,e){if(e===this.botInfoList.length){this.botInfoList.unshift(t);var n={userId:this.userId,userName:this.userId,botId:t.bot_id,botName:t.bot_name};Object(C["a"])(n).then(function(t){console.log("添加user bot 关系成功! ",t.data)})}else{this.botInfoList[e]=t;n={userId:this.userId,userName:this.userId,botId:t.bot_id,botName:t.bot_name};Object(C["j"])(n).then(function(t){console.log("更新user bot 关系成功! ",t.data)})}this.showBotSetDialog=!1,this.curBotInfoIndex=-1,this.curBotInfo={bot_name:"",bot_id:"",bot_skill:[],bot_sex:"",desc:""}},handleBotInfoCancel:function(){this.showBotSetDialog=!1,this.curBotInfoIndex=-1,this.curBotInfo={bot_name:"",bot_id:"",bot_skill:[],bot_sex:"",desc:""}},handleDeleteCard:function(t){var e=this;this.$confirm("将删除该Bot, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.botInfoList=e.botInfoList.filter(function(e){return e.bot_id!==t});var n={userId:e.userId,botId:t};Object(C["c"])(n).then(function(t){console.log("更新user bot 关系成功! ",t.data)}),e.curBotInfoIndex=-1,e.curBotInfo={bot_name:"",bot_id:"",bot_skill:[],bot_sex:"",desc:""}}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},openBotContent:function(t){console.log("打开对话流编辑面板"),this.$router.push({path:"/initTask/index",query:{userId:this.userId,botId:t}}),localStorage.setItem("botId",t)}},mounted:function(){var t=this,e=this.$store.state.user.userName;console.log("Bot 编辑页面，user name为: ",this.$store.state.user.userName),console.log("当前接收到的 userId 为: ",e),this.userId=void 0===e||""===e||"admin"===e?"user_1":e,console.log("bot 编辑界面，得到的userId为: ",this.userId),localStorage.setItem("botId","");var n={userId:this.userId};Object(C["g"])(n).then(function(e){t.botInfoList=e.data.map(function(t){return{bot_name:t.botName,bot_id:t.botId,botImg:""}}),console.log("当前用户: ",t.userId," 加载到的机器人列表为: ",t.botInfoList)})}},N=k,w=(n("96ab"),Object(f["a"])(N,o,i,!1,null,null,null));e["default"]=w.exports},"4bba":function(t,e,n){"use strict";var o=n("9fe3"),i=n.n(o);i.a},"71de":function(t,e,n){},"7ab0":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-panel-container"},[n("div",{staticClass:"card-list"},[n("el-card",{staticClass:"card-item add-card",attrs:{"body-style":{padding:"0px"}}},[n("i",{staticClass:"el-icon-plus add-card-icon",on:{click:t.addCard}})]),t._l(t.cardInfoList,function(e,o){return n("el-card",{key:o,staticClass:"card-item",attrs:{"body-style":{padding:"0px",height:"100%"}}},[t._t("default",null,{cardInfo:e})],2)})],2)])},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.pageSizes,layout:t.layout,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:pageSizes":function(e){t.pageSizes=e},"update:page-sizes":function(e){t.pageSizes=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},s=[],c=(n("c5f6"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}}),r=c,l=(n("4bba"),n("2877")),u=Object(l["a"])(r,a,s,!1,null,"38c74342",null),d=u.exports,f={name:"card-panel",components:{Pagination:d},props:{cardInfoList:{type:Array,default:function(){return[]}}},data:function(){return{total:100,page:1,limit:10,searchBotName:""}},methods:{addCard:function(){this.$emit("addCardItem")},getList:function(){this.page,this.limit,this.page,this.limit}}},b=f,p=(n("ed66"),Object(l["a"])(b,o,i,!1,null,"713bad13",null));e["a"]=p.exports},"96ab":function(t,e,n){"use strict";var o=n("71de"),i=n.n(o);i.a},"9fe3":function(t,e,n){},a776:function(t,e,n){"use strict";var o=n("00fd"),i=n.n(o);i.a},a937:function(t,e,n){},aa77:function(t,e,n){var o=n("5ca1"),i=n("be13"),a=n("79e5"),s=n("fdef"),c="["+s+"]",r="​",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(t,e,n){var i={},c=a(function(){return!!s[t]()||r[t]()!=r}),l=i[t]=c?e(f):s[t];n&&(i[n]=l),o(o.P+o.F*c,"String",i)},f=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},c5f6:function(t,e,n){"use strict";var o=n("7726"),i=n("69a8"),a=n("2d95"),s=n("5dbc"),c=n("6a99"),r=n("79e5"),l=n("9093").f,u=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,b="Number",p=o[b],h=p,I=p.prototype,g=a(n("2aeb")(I))==b,m="trim"in String.prototype,v=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():f(e,3);var n,o,i,a=e.charCodeAt(0);if(43===a||45===a){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+e}for(var s,r=e.slice(2),l=0,u=r.length;l<u;l++)if(s=r.charCodeAt(l),s<48||s>i)return NaN;return parseInt(r,o)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(g?r(function(){I.valueOf.call(n)}):a(n)!=b)?s(new h(v(e)),n,p):v(e)};for(var _,S=n("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;S.length>x;x++)i(h,_=S[x])&&!i(p,_)&&d(p,_,u(h,_));p.prototype=I,I.constructor=p,n("2aba")(o,b,p)}},cb2e:function(t,e,n){},ed66:function(t,e,n){"use strict";var o=n("a937"),i=n.n(o);i.a},efe4:function(t,e,n){"use strict";var o=n("cb2e"),i=n.n(o);i.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
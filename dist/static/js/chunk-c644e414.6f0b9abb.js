(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c644e414","chunk-26e05a30"],{"10d9":function(t,e,n){"use strict";var i=n("fada"),a=n.n(i);a.a},"2e88":function(t,e,n){"use strict";var i=n("f098"),a=n.n(i);a.a},"333e":function(t,e,n){},"4c93":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-form-select-container",attrs:{id:"ef-flow-editor"}},[n("topBtnPanel",{attrs:{pos:t.top_btn_pos}},[n("div",{staticStyle:{display:"inline-block",position:"absolute",left:"5px"}},[n("el-tooltip",{attrs:{content:"退出当前任务流",placement:"bottom",effect:"light"}},[n("i",{staticClass:"el-icon-switch-button",staticStyle:{"font-size":"22px","line-height":"35px",color:"#F56C6C"},on:{click:t.goBack}})])],1),n("div",{staticStyle:{"text-align":"center",display:"inline-block",position:"absolute",left:"30px"}},[n("el-divider",{attrs:{direction:"vertical"}}),n("el-tooltip",{attrs:{content:"切换上线下线",placement:"bottom",effect:"light"}},[n("el-switch",{attrs:{"active-color":"#67C23A","inactive-color":"#C0C4CC",size:"mini"},on:{change:t.handlToggleOnline},model:{value:t.online_status,callback:function(e){t.online_status=e},expression:"online_status"}})],1)],1),n("div",{staticStyle:{display:"inline-block",position:"absolute",left:"85px"}},[n("el-divider",{attrs:{direction:"vertical"}}),n("el-tooltip",{attrs:{content:"点击切换任务流",placement:"bottom",effect:"light"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.edit_taskname,expression:"!edit_taskname"}],staticStyle:{"font-size":"15px","margin-left":"8px"},on:{click:function(e){t.edit_taskname=!0}}},[t._v(t._s(t.taskname))])]),n("el-select",{directives:[{name:"show",rawName:"v-show",value:t.edit_taskname,expression:"edit_taskname"}],attrs:{size:"mini",placeholder:"选择任务名称"},on:{blur:function(e){t.edit_taskname=!1},change:function(e){t.edit_taskname=!1}},model:{value:t.taskname,callback:function(e){t.taskname=e},expression:"taskname"}},t._l(t.tasknameLst,function(t){return n("el-option",{key:t.taskId,attrs:{label:t.taskName,value:t.taskId}})}),1)],1)]),n("leftBtnPanel",{style:t.left_btn_pos},[n("intent-btn",{attrs:{userId:t.userId,botId:t.botId,taskId:t.taskId}}),n("var-btn",{attrs:{userId:t.userId,botId:t.botId,taskId:t.taskId}}),n("entity-btn",{attrs:{userId:t.userId,botId:t.botId,taskId:t.taskId}}),n("chat-btn",{attrs:{userId:t.userId,botId:t.botId,taskId:t.taskId}})],1),n("graph-editor",{ref:"graphEditor",attrs:{userId:t.userId,botId:t.botId,taskId:t.taskId,taskName:t.taskName}})],1)},a=[],o=n("e1f3"),s=n("eb3b"),r=n("6d28"),l=n("971d"),c=n("d828"),u=n("6914"),d=n("2a82"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"op-btn-panel",style:t.pos},[t._t("default")],2)},h=[],I={name:"top-btn-panel",props:{pos:{type:Object,default:function(){return{left:"200px",width:"100px"}}}},data:function(){return{}},methods:{}},p=I,m=(n("10d9"),n("2877")),b=Object(m["a"])(p,f,h,!1,null,null,null),y=b.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-panel",style:t.pos},[t._t("default")],2)},v=[],x={name:"left-btn-panel",props:{pos:{type:Object,default:function(){}}},data:function(){return{}}},_=x,k=(n("e4e4"),Object(m["a"])(_,g,v,!1,null,"66461f33",null)),w=k.exports,E=n("e88d"),V=n("b169"),$=n("a74b"),L=n("531e"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ef-var-container"},[n("span",{on:{click:t.openVarialeEditor}},[n("i",{staticClass:"iconfont icon-liebiao1",staticStyle:{"font-size":"25px"}})]),n("el-dialog",{attrs:{width:"60%",title:"编辑变量",modal:!1,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[n("var-list",{attrs:{userId:t.userId,botId:t.botId},on:{confirm:t.onCloseDialog,cancel:t.onCloseDialog}})],1)],1)},N=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("机器人全局变量")]),n("div",{staticClass:"ef-var-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.variableInfos,border:"","max-height":"300px",height:"200px"}},[n("el-table-column",{attrs:{prop:"varName",label:"变量名称",width:"180"}}),n("el-table-column",{attrs:{prop:"varType",label:"变量类型",width:"180"}}),n("el-table-column",{attrs:{prop:"varValue",label:"变量默认值"}}),n("el-table-column",{attrs:{label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("i",{staticClass:"el-icon-edit",on:{click:function(n){return t.editHandle(e.$index)}}}),t._v("\n                         \n                        "),n("i",{staticClass:"el-icon-delete",on:{click:function(n){return t.delHandle(e.$index)}}})])]}}])})],1)],1),n("span",{on:{click:t.addHandle}},[t._v("+ 添加新的变量 ")]),n("div",{staticClass:"ef-var-footer",staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirmHandle}},[t._v("保存")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.cancelHandle}},[t._v("取消")])],1),n("el-dialog",{attrs:{title:"编辑变量",visible:t.varDiaVisible,"append-to-body":""},on:{"update:visible":function(e){t.varDiaVisible=e}}},[n("el-form",{attrs:{model:t.curVarInfo}},[n("el-form-item",{attrs:{label:"变量名称","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.curVarInfo.varName,callback:function(e){t.$set(t.curVarInfo,"varName",e)},expression:"curVarInfo.varName"}})],1),n("el-form-item",{attrs:{label:"变量类型","label-width":t.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选变量类型"},model:{value:t.curVarInfo.varType,callback:function(e){t.$set(t.curVarInfo,"varType",e)},expression:"curVarInfo.varType"}},[n("el-option",{attrs:{label:"int",value:"int"}}),n("el-option",{attrs:{label:"float",value:"float"}}),n("el-option",{attrs:{label:"string",value:"string"}}),n("el-option",{attrs:{label:"json",value:"json"}}),n("el-option",{attrs:{label:"array",value:"array"}})],1)],1),n("el-form-item",{attrs:{label:"初始值","label-width":t.formLabelWidth}},[n("el-input",{model:{value:t.curVarInfo.varValue,callback:function(e){t.$set(t.curVarInfo,"varValue",e)},expression:"curVarInfo.varValue"}})],1)],1),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancelEdit}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submitEdit}},[t._v("确 定")])],1)],1)],1)},C=[],T=(n("6b54"),n("a481"),n("cebc")),B=n("2ef0"),j=n("2f62"),O={name:"varList",props:{botId:{type:String,default:""},userId:{type:String,default:""}},computed:Object(T["a"])({},Object(j["b"])("task",{variableInfos:"variableLst"})),data:function(){return{varDiaVisible:!1,formLabelWidth:"80px",curVarInfo:{userId:this.userId,botId:this.botId,varId:void 0,varName:"",varType:"",varValue:""}}},methods:{UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},loadVariableList:function(t,e){var n={userId:this.userId,botId:this.botId};this.$store.dispatch("task/loadVariables",n)},editHandle:function(t){this.curVarInfo=this.variableInfos[t],this.varDiaVisible=!0},delHandle:function(t){var e=this;this.$confirm("此操作将永久删除该变量, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("task/delVariable",Object(B["cloneDeep"])(e.variableInfos[t])),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addHandle:function(){this.varDiaVisible=!0,this.curVarInfo={userId:this.userId,botId:this.botId,varId:"VAR_"+this.UUID(),varName:"",varType:"",varValue:""}},confirmHandle:function(){this.$emit("confirm")},cancelHandle:function(){this.curVarInfo={userId:this.userId,botId:this.botId,varId:void 0,varName:"",varType:"",varValue:""},this.$emit("cancel")},cancelEdit:function(){this.curVarInfo={userId:this.userId,botId:this.botId,varId:void 0,varName:"",varType:"",varValue:""},this.varDiaVisible=!1},submitEdit:function(){var t=this;this.variableInfos.filter(function(e){return e.varName===t.curVarInfo.varName});this.$store.dispatch("task/updateVariable",Object(B["cloneDeep"])(this.curVarInfo)),this.varDiaVisible=!1}},mounted:function(){this.loadVariableList(this.userId,this.botId)},watched:function(){}},z=O,q=Object(m["a"])(z,S,C,!1,null,null,null),F=q.exports,U={name:"varBtn",components:{varList:F},props:{botId:{type:String,default:""},userId:{type:String,default:""}},data:function(){return{showDialog:!1}},methods:{openVarialeEditor:function(){this.showDialog=!0},onCloseDialog:function(){this.showDialog=!1}}},H=U,A=(n("5a87"),Object(m["a"])(H,D,N,!1,null,null,null)),M=A.exports,P=n("93bf"),W=n.n(P),J={name:"optionForm",components:{botForm:o["a"],endForm:s["a"],funcForm:r["a"],startForm:l["a"],subBotForm:c["a"],switchForm:u["a"],userForm:d["a"],graphEditor:E["default"],entityBtn:V["default"],chatBtn:$["default"],intentBtn:L["default"],varBtn:M,topBtnPanel:y,leftBtnPanel:w},watch:{$route:function(){var t=localStorage.getItem("botId"),e=this.$store.state.user.userName,n=localStorage.getItem("taskId"),i=localStorage.getItem("taskName");this.userId=void 0===e||""===e||"admin"===e?"user_1":e,this.botId=t,void 0!==n&&""!==n&&(this.taskId=n),void 0!==i&&""!==i&&(this.taskName=i),console.log("flowEdit route watch 编辑界面接收到的userId 为: "+this.userId+"接收到的botId为: "+this.botId+"接收到的 taskId: "+this.taskId+" 接收到的 taskName: "+this.taskName)}},created:function(){var t=localStorage.getItem("botId"),e=this.$store.state.user.userName,n=localStorage.getItem("taskId"),i=localStorage.getItem("taskName");this.userId=void 0===e||""===e||"admin"===e?"user_1":e,void 0!==t&&""!==t&&(this.botId=t),void 0!==n&&""!==n&&(this.taskId=n),void 0!==i&&""!==i&&(this.taskName=i),console.log("flowEdit create 编辑界面接收到的userId 为: "+this.userId+"接收到的botId为: "+this.botId+"接收到的 taskId: "+this.taskId+" 接收到的 taskName: "+this.taskName)},data:function(){return{userId:"user_1",botId:"bot_1",taskId:"task_1",taskName:"task_name_1",top_btn_pos:{left:"120px",width:"280px",height:"38px","margin-top":"10px"},top_shut_pos:{left:"750px",width:"90px"},left_btn_pos:{top:"110px",height:"150px","padding-left":"5px"},edit_taskname:!1,online_status:!1,taskname:"task_",tasknameLst:[{taskId:"task_1",taskName:"task_1111111"},{taskId:"task_2",taskName:"task_211111"},{taskId:"task_3",taskName:"task_3111111"}],flag:!1,drawer_trigger:!1,loading:!1,cur_form:{},cur_node:{},cur_formname:"",nodes:[{name:"开始",type:"start"},{name:"结束",type:"end"},{name:"用户",type:"user"},{name:"客服",type:"bot"},{name:"函数",type:"func"},{name:"分支",type:"switch"}]}},methods:{toggleFull:function(){var t=document.getElementById("ef-flow-editor");W.a.toggle(t)},goBack:function(){var t=this,e=this;e.$confirm("将要退出当前对话流的编辑空间, 退出前请确保编辑的内容已经保存, 是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("关闭画布，触发清空"),t.$refs.graphEditor.clear_canvas(),t.$router.push({path:"/initTask/index",query:{botId:t.botId}}),localStorage.setItem("taskId","")}).catch(function(){e.$message({type:"info",message:"取消退出"})})},canvas_load:function(){this.$refs.graphEditor.reload_canvas()},handlToggleOnline:function(t){var e=this;this.$confirm("是否修改？").then(function(t){console.log("接收到的event: "+t),"confirm"!==t&&(e.online_status=!e.online_status)});var n="";n=this.online_status?"是否上线当前任务流":"是否下线当前任务流",this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.online_status=e.online_status,e.online_status?e.$message({type:"info",message:"成功上线"}):e.$message({type:"info",message:"成功下线"})}).catch(function(){e.online_status=!e.online_status,e.online_status?e.$message({type:"info",message:"已取消下线"}):e.$message({type:"info",message:"已取消上线"})})},openDrawer:function(t){this.drawer_trigger=!0,this.cur_node=this.nodes[t],this.cur_formname=this.cur_node.type+"Form"},done:function(){this.drawer_trigger=!1},handleDrawerClose:function(){var t=this;this.$confirm("确定提交么?").then(function(e){t.loading=!0,t.timer=setTimeout(function(){t.done(),setTimeout(function(){t.loading=!1},400)},2e3)}).catch(function(t){})},cancelForm:function(){this.loading=!1,this.drawer_trigger=!1}}},R=J,G=(n("5472"),Object(m["a"])(R,i,a,!1,null,"2e28aadf",null));e["default"]=G.exports},"531e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"test-intent-container"},[n("span",{on:{click:t.openDialog}},[n("i",{staticClass:"iconfont icon-local",staticStyle:{"font-size":"25px"}})]),n("el-dialog",{attrs:{title:"意图列表",visible:t.showDialog,width:"70%",modal:!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.showDialog=e}}},[n("intent-list",{attrs:{botId:t.botId,userId:t.userId}})],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intent-list-container"},[n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-col",{attrs:{span:10}},[n("el-input",{staticClass:"input-with-search",attrs:{placeholder:"输入查询意图名称",size:"small"},model:{value:t.searchIntentName,callback:function(e){t.searchIntentName=e},expression:"searchIntentName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleIntentSearch},slot:"append"})],1)],1),n("el-col",{attrs:{span:14}},[n("el-button-group",{staticStyle:{float:"right","margin-right":"30px"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addIntentInfo()}}},[t._v("新建意图")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"400px",height:"400px","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{prop:"intentName",label:"意图名称",width:"130"}}),n("el-table-column",{attrs:{prop:"queryList",label:"用户话术"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.queryList,function(e,i){return n("p",{key:i},[t._v("\n                    "+t._s(e)+"\n                ")])})}}])}),n("el-table-column",{attrs:{prop:"slot",label:"槽位",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.slotNames,function(e,i){return n("p",{key:i},[t._v("\n                    "+t._s(e)+"\n                ")])})}}])}),n("el-table-column",{attrs:{prop:"",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{on:{click:function(n){return t.editIntentInfo(e.$index)}}},[t._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("i",{on:{click:function(n){return t.deleteIntent(e.$index)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"编辑意图",visible:t.showEditDialog,width:"85%","before-close":t.handleEditDialogClose,"append-to-body":""},on:{"update:visible":function(e){t.showEditDialog=e}}},[n("intent-info",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.curIntentInfo,expression:"curIntentInfo !== undefined"}],ref:"intentInfo",attrs:{userId:t.userId,botId:t.botId,intentInfo:t.curIntentInfo,intentIndex:t.curIntentIndex},on:{updateIntent:t.handleIntentInfoChange,cancelIntent:t.handleCancel}})],1)],1)},s=[],r=(n("6b54"),n("a481"),n("cebc")),l=n("2f62"),c=n("6a3b"),u=(n("2ef0"),{name:"intent-list",components:{intentInfo:c["a"]},computed:Object(r["a"])({},Object(l["b"])("nlu",["intentInfoList"])),props:{botId:{type:String,default:"",require:!0},userId:{type:String,default:"",require:!0}},data:function(){return{showEditDialog:!1,searchIntentName:"",tableData:[],curIntentInfo:{},curIntentIndex:-1}},methods:{UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},loadIntentList:function(t,e){var n={userId:this.userId,botId:this.botId};this.$store.dispatch("nlu/loadIntentList",n)},init_tableData:function(){return this.intentInfoList.map(function(t){return{intentName:t.intentName,queryList:t.queryLst.map(function(t){return t.query}),slotNames:t.slotInfoLst.map(function(t){return t.slotName})}})},editIntentInfo:function(t){var e=this;console.log("打开编辑框， 传入的索引为: "+t+"传入的intentInfo:"+this.intentInfoList[t]),this.showEditDialog=!0,this.curIntentInfo=this.intentInfoList[t],this.curIntentIndex=t,this.$nextTick(function(){e.$refs.intentInfo.heighlightAll()})},addIntentInfo:function(){this.showEditDialog=!0,this.curIntentInfo=void 0,this.curIntentInfo={intentName:"",intentId:"intent_"+this.UUID(),userId:this.userId,botId:this.botId,queryLst:[],slotInfoLst:[],regLst:[{regContent:"",isStrictMatch:!1}]},this.curIntentIndex=this.intentInfoList.length},handleEditDialogClose:function(){this.showEditDialog=!1,this.curIntentInfo=void 0,this.curIntentInfo={intentName:"",intentId:"",userId:this.userId,botId:this.botId,queryLst:[],slotInfoLst:[],regLst:[]},this.curIntentIndex=-1},deleteIntent:function(t){var e=this,n=this;n.$confirm("将要删除当前意图, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("nlu/delIntentInfo",e.intentInfoList[t]),e.tableData=e.init_tableData(),e.$emit("deleteIntenEvent",t),n.$message({type:"success",message:"当前意图成功删除"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},handleIntentInfoChange:function(t){console.log("intent idx: "+this.curIntentIndex),this.tableData=this.init_tableData(),this.showEditDialog=!1,this.curIntentInfo=void 0,this.curIntentInfo={intentName:"",intentId:"",userId:this.userId,botId:this.botId,queryLst:[],slotInfoLst:[],regLst:[]},this.curIntentIndex=-1},handleCancel:function(){this.showEditDialog=!1,this.curIntentInfo=void 0,this.curIntentInfo={intentName:"",intentId:"",userId:this.userId,botId:this.botId,queryLst:[],slotInfoLst:[],regLst:[]},this.curIntentIndex=-1},handleIntentSearch:function(){}},watch:{intentInfoList:{handler:function(t,e){this.tableData=this.init_tableData()},deep:!0}},mounted:function(){this.loadIntentList(),this.tableData=this.init_tableData()}}),d=u,f=(n("2e88"),n("2877")),h=Object(f["a"])(d,o,s,!1,null,null,null),I=h.exports,p={name:"intent_test",components:{intentList:I},props:{botId:{type:String,default:"",require:!0},userId:{type:String,default:"",require:!0}},data:function(){return{showDialog:!1}},methods:{openDialog:function(){this.showDialog=!0},handleClose:function(){this.showDialog=!1}}},m=p,b=(n("64a6"),Object(f["a"])(m,i,a,!1,null,null,null));e["default"]=b.exports},5472:function(t,e,n){"use strict";var i=n("f9d9"),a=n.n(i);a.a},"5a87":function(t,e,n){"use strict";var i=n("a3d5"),a=n.n(i);a.a},"64a6":function(t,e,n){"use strict";var i=n("71a8"),a=n.n(i);a.a},"71a8":function(t,e,n){},"7e9c":function(t,e,n){"use strict";var i=n("333e"),a=n.n(i);a.a},"83e8":function(t,e,n){},a3d5:function(t,e,n){},b169:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{on:{click:t.openEntityEditor}},[n("i",{staticClass:"iconfont icon-shujuzidian",staticStyle:{"font-size":"25px"}})]),n("el-dialog",{attrs:{width:"60%",title:"编辑名词",modal:!1,visible:t.outerVisible},on:{"update:visible":function(e){t.outerVisible=e}}},[n("entityList",{ref:"entLst",attrs:{userId:t.userId,botId:t.botId,entityInfoList:t.entityInfoList},on:{updateEntity:t.trigger_updateEntity,addEntity:t.trigger_addEntity,deleteEntity:t.trigger_deleteEntity}}),n("el-dialog",{attrs:{width:"60%",title:"新建名词",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[n("entityInfo",{ref:"entityedit",attrs:{userId:t.userId,botId:t.botId,entityNode:t.curEntityInfo},on:{updateEntity:t.updateEntity,cancelEntity:t.cancelEntity}})],1)],1)],1)},a=[],o=(n("20d6"),n("6b54"),n("a481"),n("cebc")),s=n("2f62"),r=n("706f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-editer-container"},[n("el-row",{staticStyle:{"margin-bottom":"7px"}},[n("el-col",{attrs:{span:10}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.searchIntentName,callback:function(e){t.searchIntentName=e},expression:"searchIntentName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("el-col",{attrs:{span:14}},[n("el-button-group",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addEntityInfo("normal")}}},[t._v("新建标准名词")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addEntityInfo("regex")}}},[t._v("新建正则名词")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"280",height:"280",border:"","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{width:"160",prop:"entityName",label:"名词类型"}}),n("el-table-column",{attrs:{prop:"entityValues",label:"名词成员以及其同义词"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.entityValues,function(e,i){return n("p",{key:i},[t._v("\n                    "+t._s(e)+" ----\n                ")])})}}])}),n("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{on:{click:function(n){return t.editEntityInfo(e.$index)}}},[t._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("i",{on:{click:function(n){return t.deleteEntity(e.$index)}}},[t._v("删除")])]}}])})],1)],1)},c=[],u={name:"entity-list",props:{entityInfoList:{type:Array,default:function(){return[]}},userId:{type:String,default:""},botId:{type:String,default:""}},data:function(){return{searchIntentName:""}},computed:{tableData:{get:function(){return this.entityInfoList.map(function(t){return{entityName:t.entityName,entityValues:t.entityValues.map(function(t){return t.entityValue})}})},set:function(t){}}},watch:{entityInfoList:{deep:!0,handler:function(t,e){console.log("Ent list 监听到 实体字典变化: ",t)}}},mounted:function(){},methods:{initTableData:function(t){console.log("加载实体列表生成展示表格数据 ",t),this.tableData=t.map(function(t){return{entityName:t.entityName,entityValues:t.entityValues.map(function(t){return t.entityValue})}})},editEntityInfo:function(t){this.$emit("updateEntity",t),console.log("发出 更新名词动作")},addEntityInfo:function(t){this.$emit("addEntity",t),console.log("发出添加名词动作: "+t)},deleteEntity:function(t){var e=this;console.log("发出删除名词动作",t);var n=this;n.$confirm("将要删除当前实体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("deleteEntity",t),n.$message({type:"success",message:"当前实体成功删除"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})}}},d=u,f=n("2877"),h=Object(f["a"])(d,l,c,!1,null,"0d08386b",null),I=h.exports,p={name:"entity",components:{entityInfo:r["a"],entityList:I},props:{userId:{type:String,default:""},botId:{type:String,default:""}},computed:Object(o["a"])({},Object(s["b"])("nlu",["entityInfoList"])),data:function(){return{outerVisible:!1,innerVisible:!1,curEntityInfo:{useId:this.userId,botId:this.botId,entityName:"",entityId:"",entityValues:[{entityValue:"",synmous:[]}]}}},methods:{UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},openEntityEditor:function(){var t=this;this.outerVisible=!0,this.$nextTick(function(){console.log("触发加载用户实体字典时的引用: ",t.$refs.entLst)})},trigger_updateEntity:function(t){console.log("收到更新实体的事件，参数为: "+t),this.curEntityInfo=this.entityInfoList[t],this.innerVisible=!0},trigger_addEntity:function(t){console.log("收到添加实体的事件"+t),this.innerVisible=!0,this.$nextTick(function(){this.$refs.entityedit.entityType(t)}),this.curEntityInfo={useId:this.userId,botId:this.botId,entityName:"",entityId:"ent_"+this.UUID(),entityValues:[{entityValue:"",synmous:[]}]}},trigger_deleteEntity:function(t){console.log("收到删除实体的事件， 参数为: "+t),this.$store.dispatch("nlu/delEntityInfo",this.entityInfoList[t])},updateEntity:function(t){var e=this.entityInfoList.findIndex(function(e){return e.entityId===t.entityId});-1===e?this.entityInfoList.unshift(t):(this.entityInfoList.splice(e,1),this.entityInfoList.unshift(t),this.$nextTick()),this.$store.dispatch("nlu/updateEntityInfo",t),this.innerVisible=!1,this.curEntityInfo=void 0},cancelEntity:function(t){console.log("接收到取消事件"),this.entityVisible=!1,this.curEntityInfo=void 0}},watch:{entityInfoList:{deep:!0,handler:function(t,e){console.log("entity Editor index 监控到 实体列表发生变化",t)}}},created:function(){var t={userId:this.userId,botId:this.botId};this.$store.dispatch("nlu/loadEntityList",t),console.log("加载实体: ",this.entityInfoList)}},m=p,b=(n("7e9c"),Object(f["a"])(m,i,a,!1,null,"53a77746",null));e["default"]=b.exports},e4e4:function(t,e,n){"use strict";var i=n("83e8"),a=n.n(i);a.a},f098:function(t,e,n){},f9d9:function(t,e,n){},fada:function(t,e,n){}}]);
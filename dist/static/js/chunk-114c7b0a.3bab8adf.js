(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-114c7b0a"],{"10da":function(t,e,a){"use strict";var n=a("b85e"),s=a.n(n);s.a},1884:function(t,e,a){"use strict";var n=a("b469"),s=a.n(n);s.a},"434a":function(t,e,a){"use strict";var n=a("ba25"),s=a.n(n);s.a},"4bba":function(t,e,a){"use strict";var n=a("9fe3"),s=a.n(n);s.a},"7ab0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-panel-container"},[a("div",{staticClass:"card-list"},[a("el-card",{staticClass:"card-item add-card",attrs:{"body-style":{padding:"0px"}}},[a("i",{staticClass:"el-icon-plus add-card-icon",on:{click:t.addCard}})]),t._l(t.cardInfoList,function(e,n){return a("el-card",{key:n,staticClass:"card-item",attrs:{"body-style":{padding:"0px",height:"100%"}}},[t._t("default",null,{cardInfo:e})],2)})],2)])},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.pageSizes,layout:t.layout,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:pageSizes":function(e){t.pageSizes=e},"update:page-sizes":function(e){t.pageSizes=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],r=(a("c5f6"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}}),c=r,l=(a("4bba"),a("2877")),u=Object(l["a"])(c,i,o,!1,null,"38c74342",null),d=u.exports,f={name:"card-panel",components:{Pagination:d},props:{cardInfoList:{type:Array,default:function(){return[]}}},data:function(){return{total:100,page:1,limit:10,searchBotName:""}},methods:{addCard:function(){this.$emit("addCardItem")},getList:function(){this.page,this.limit,this.page,this.limit}}},p=f,g=(a("ed66"),Object(l["a"])(p,n,s,!1,null,"713bad13",null));e["a"]=g.exports},9092:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskflow-set-container"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"机器人设置",name:"1"}},[a("bot-page")],1),a("el-tab-pane",{attrs:{label:"任务流编辑",name:"2"}},[a("task-panel",{attrs:{userId:t.userId,botId:t.botId}})],1),a("el-tab-pane",{attrs:{label:"意图编辑",name:"3"}},[a("intent-page")],1),a("el-tab-pane",{attrs:{label:"实体编辑",name:"4"}},[a("entity-page")],1),a("el-tab-pane",{attrs:{label:"变量设置",name:"5"}},[a("variable-page")],1),a("el-tab-pane",{attrs:{label:"函数编辑",name:"6"}},[a("code-editor")],1)],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bot-tab-container"},[t._v("\n   todo: 机器人配置展示页面\n")])},o=[],r={name:"bot-page",data:function(){return{}}},c=r,l=(a("434a"),a("2877")),u=Object(l["a"])(c,i,o,!1,null,null,null),d=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"entity-tab-container"},[t._v("\n   todo: 实体配置展示页面\n")])},p=[],g={name:"entity-page",data:function(){return{}}},h=g,m=Object(l["a"])(h,f,p,!1,null,null,null),k=m.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"function-tab-container"},[t._v("\n   todo: 函数配置展示页面\n")])},b=[],_={name:"function-page",data:function(){return{}}},v=_,S=Object(l["a"])(v,I,b,!1,null,null,null),T=S.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"intent-tab-container"},[t._v("\n   todo: 意图配置展示页面\n")])},C=[],x={name:"intent-page",data:function(){return{}}},N=x,w=Object(l["a"])(N,y,C,!1,null,null,null),E=w.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-init-container"},[a("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"40px"}},[t._t("header"),a("el-col",{attrs:{span:7}},[a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"30px"},attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.searchTaskByName,callback:function(e){t.searchTaskByName=e},expression:"searchTaskByName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-col",{attrs:{span:15}},[a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.taskFlowLoad}},[t._v("导入对话流")])],1)],1),a("el-col",{attrs:{span:2}})],2),a("card-panel",{attrs:{cardInfoList:t.taskInfoList},on:{addCardItem:t.addCardItem},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{height:"calc(70% - 10px)","padding-top":"15px","padding-left":"15px",position:"relative"}},[a("div",{staticStyle:{float:"left"}},[t._v("Task-"+t._s(e.cardInfo.task_name)+" ")]),a("i",{staticClass:"el-icon-setting",staticStyle:{float:"right","margin-right":"20px"},on:{click:function(a){return t.editCardItem(e.cardInfo.task_id)}}}),a("i",{staticClass:"el-icon-edit",staticStyle:{float:"right","margin-right":"10px"},on:{click:function(a){return t.editTaskflow(e.cardInfo.task_id,e.cardInfo.task_name)}}}),a("div",{staticStyle:{"margin-top":"35px"}},[t._v(" "+t._s(e.cardInfo.desc)+" ")]),a("div")]),a("div",{staticStyle:{"padding-left":"10px","padding-right":"7px","border-top":"1px solid lightgray"}},[a("span"),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v("编辑时间: "+t._s(e.cardInfo.create_time))]),a("el-button",{staticClass:"button",attrs:{type:"text"}},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.handleDeleteCard(e.cardInfo.task_id)}}})])],1)])]}}])}),a("el-dialog",{attrs:{title:"编辑任务",visible:t.showTaskSetDialog,width:"50%","before-close":t.handleDialogClose},on:{"update:visible":function(e){t.showTaskSetDialog=e}}},[a("el-form",{attrs:{model:t.curTaskInfo,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"task_name"}},[a("el-input",{model:{value:t.curTaskInfo.task_name,callback:function(e){t.$set(t.curTaskInfo,"task_name",e)},expression:"curTaskInfo.task_name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"task_desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.curTaskInfo.task_DESC,callback:function(e){t.$set(t.curTaskInfo,"task_DESC",e)},expression:"curTaskInfo.task_DESC"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm(t.curTaskInfo)}}},[t._v("确认")]),a("el-button",{on:{click:function(e){return t.resetForm()}}},[t._v("取消")])],1)],1)],1)],1)},$=[],z=a("7ab0"),L=a("eee3"),P=a("2ef0"),F=a.n(P),A={name:"task-panel",components:{cardPanel:z["a"]},props:{userId:{type:String,default:""},botId:{type:String,default:""}},data:function(){return{showTaskSetDialog:!1,searchTaskByName:"",taskInfoList:[{task_name:"Task",task_id:"task_1",task_desc:"",create_time:"",start_agent:!1}],emptyTaskInfo:{task_name:"",task_id:"",task_desc:"",create_time:"",start_agent:!1},curTaskInfo:{task_name:"",task_id:"",task_desc:"",create_time:"",start_agent:!1},curTaskInfoIndex:-1,currentDate:new Date}},methods:{create_time:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),s=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return e+"-"+a+"-"+n+" "+s+":"+i+":"+o},getUUID:function(){return this.$util.uuid()},taskFlowLoad:function(){},addCardItem:function(){console.log("接收到添加item的事件"),this.showTaskSetDialog=!0},submitForm:function(t){if(""===t.task_id||void 0===t){var e=this.create_time();t.create_time=e,t.task_id="task_"+this.getUUID(),this.taskInfoList.unshift(F.a.cloneDeep(t))}this.showTaskSetDialog=!1,this.curTaskInfo=F.a.cloneDeep(this.emptyTaskInfo)},resetForm:function(){this.showTaskSetDialog=!1},editCardItem:function(t){this.curTaskInfo=this.taskInfoList.filter(function(e){return e.task_id===t})[0],console.log("当前的机器人信息为: "),console.log(this.curBotInfo);var e=this.create_time();this.curTaskInfo.create_time=e,this.showTaskSetDialog=!0},editTaskflow:function(t,e){console.log("打开对话流画布",t),this.$router.push({path:"/flowEditor/index",query:{userId:this.userId,botId:this.botId,taskId:t,taskName:e}}),localStorage.setItem("taskId",t),localStorage.setItem("taskName",e)},openBotSetDialog:function(t){this.showBotSetDialog=!0},handleDialogClose:function(){this.showTaskSetDialog=!1},handleBotInfoUpdate:function(t,e){e===this.taskInfoList.length?this.taskInfoList.unshift(t):this.taskInfoList[e]=t,this.showTaskSetDialog=!1,this.curTaskInfoIndex=-1,this.curTaskInfo={}},handleBotInfoCancel:function(){this.showTaskSetDialog=!1,this.curTaskInfoIndex=-1,this.curTaskInfo={}},handleDeleteCard:function(t){var e=this;this.$confirm("将删除该Task, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.taskInfoList=e.taskInfoList.filter(function(e){return e.task_id!==t}),e.curTaskInfoIndex=-1,e.curTaskInfo={}}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},_fetch_taskInfos:function(t){var e=this;t.userId,t.botId;Object(L["e"])(t).then(function(a){var n=a["data"];console.log("task列表查询参数为: ",t),console.log("加载的task列表为: ",n),e.taskInfoList=void 0!==n&&n!==[]?n.map(function(t){return{task_name:t.taskName,task_id:t.taskId,task_desc:"",create_time:"",start_agent:!1}}):[{task_name:"Task",task_id:"task_1",task_desc:"",create_time:"",start_agent:!1}]}).catch(function(t){console.log("加载task列表失败!"),console.log(t)})}},mounted:function(){var t={userId:this.userId,botId:this.botId};console.log("task panel params: ",this.userId,this.botId),this._fetch_taskInfos(t),console.log("Task Panel接收到的botId 为: "+this.botId),localStorage.setItem("taskId",""),localStorage.setItem("taskName","")}},B=A,O=(a("10da"),Object(l["a"])(B,D,$,!1,null,null,null)),j=O.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"variable-tab-container"},[t._v("\n   todo: 变量配置展示页面\n")])},M=[],V={name:"varialbe-page",data:function(){return{}}},R=V,G=Object(l["a"])(R,U,M,!1,null,null,null),Y=G.exports,q=a("c649"),J={name:"initTask",components:{botPage:d,entityPage:k,functionPage:T,intentPage:E,taskPanel:j,variablePage:Y,codeEditor:q["default"]},data:function(){return{userId:"",botId:"",activeTab:"2"}},created:function(){var t=localStorage.getItem("botId"),e=this.$store.state.user.userName;console.log("task init vue load: ",t,e),this.userId=void 0===e||""===e||"admin"===e?"user_1":e,this.botId=t,console.log("Task 编辑界面接收到的botId 为: "+t+" 接收到的 userId 为: "+e),localStorage.setItem("taskId",""),localStorage.setItem("taskName","");var a={userId:this.userId,botId:this.botId};this.$store.dispatch("nlu/loadIntentList",a),this.$store.dispatch("nlu/loadEntityList",a),this.$store.dispatch("task/loadVariables",a)}},X=J,H=(a("1884"),Object(l["a"])(X,n,s,!1,null,null,null));e["default"]=H.exports},"9fe3":function(t,e,a){},a937:function(t,e,a){},aa77:function(t,e,a){var n=a("5ca1"),s=a("be13"),i=a("79e5"),o=a("fdef"),r="["+o+"]",c="​",l=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),d=function(t,e,a){var s={},r=i(function(){return!!o[t]()||c[t]()!=c}),l=s[t]=r?e(f):o[t];a&&(s[a]=l),n(n.P+n.F*r,"String",s)},f=d.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},b469:function(t,e,a){},b85e:function(t,e,a){},ba25:function(t,e,a){},c5f6:function(t,e,a){"use strict";var n=a("7726"),s=a("69a8"),i=a("2d95"),o=a("5dbc"),r=a("6a99"),c=a("79e5"),l=a("9093").f,u=a("11e9").f,d=a("86cc").f,f=a("aa77").trim,p="Number",g=n[p],h=g,m=g.prototype,k=i(a("2aeb")(m))==p,I="trim"in String.prototype,b=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=I?e.trim():f(e,3);var a,n,s,i=e.charCodeAt(0);if(43===i||45===i){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+e}for(var o,c=e.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>s)return NaN;return parseInt(c,n)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof g&&(k?c(function(){m.valueOf.call(a)}):i(a)!=p)?o(new h(b(e)),a,g):b(e)};for(var _,v=a("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;v.length>S;S++)s(h,_=v[S])&&!s(g,_)&&d(g,_,u(h,_));g.prototype=m,m.constructor=g,a("2aba")(n,p,g)}},ed66:function(t,e,a){"use strict";var n=a("a937"),s=a.n(n);s.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);